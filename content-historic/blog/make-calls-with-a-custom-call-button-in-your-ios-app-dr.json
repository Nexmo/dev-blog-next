{"_filedata":{"slug":"make-calls-with-a-custom-call-button-in-your-ios-app-dr"},"title":"Make Calls With a Custom Call Button in Your iOS App","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/03/Blog_Customer-Call-Button_1200x600-1.png","author":368,"published":true,"published_at":"2020-04-17T10:10:33","tags":[661,595],"body":"In this tutorial, we will review how to easily make calls inside of your iOS application using a custom UI component, `NXMCallButton`.\n\nAs the name suggests, `NXMCallButton` is a subclass of UIButton and, when pressed, the callee will be called using the Nexmo Client SDK—the callee can be either an in-app user or a PSTN number, depending on how the button is configured.\n\n## Prerequisites\n\n*   A [Vonage APIs (formerly Nexmo) application](https://developer.nexmo.com/client-sdk/in-app-voice/getting-started/app-to-app-call/ios)\n    \n*   At least [one user](https://developer.nexmo.com/client-sdk/in-app-voice/getting-started/app-to-app-call/ios) for your Vonage APIs application with a [valid JWT](https://developer.nexmo.com/client-sdk/in-app-voice/getting-started/app-to-app-call/ios)\n    \n*   A [webhook](https://developer.nexmo.com/concepts/guides/webhooks) for [Voice API](https://developer.nexmo.com/application/overview#webhooks)\n    \n\nIn this tutorial, the project will be called `MyApp` and will be located in `~/Documents/MyApp`. We’ll begin with an empty `Single View App` template generated by Xcode.\n\n_Note for Xcode 11:_ When choosing options for your new project, make sure you select the `Storyboard` value for the `User Interface` field:\n\n![enter image description here](https://i.imgur.com/8F6llaC.png)\n\nLet’s begin!\n\n## Installing Nexmo Client SDK\n\n### Initiating CocoaPods for your Project\n\nYou will need to initiate CocoaPods for your project by executing the following commands:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">cd ~/Documents/MyApp pod init</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180058f181662063-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180058f181662063-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180058f181662063-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc180058f181662063-1\"><span class=\"crayon-v\">cd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Documents</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">MyApp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180058f181662063-2\"><span class=\"crayon-e\">pod </span><span class=\"crayon-i\">init</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180058f181662063-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nNotice that a file named `Podfile` was created.\n\n### Add the Nexmo Client SDK Pod\n\nTo add the Nexmo Client SDK pod, open the newly created `Podfile` using Xcode and add `NexmoClient` to your project target:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">target 'MyApp' do use_frameworks! pod 'NexmoClient' end</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1800596110088783-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1800596110088783-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1800596110088783-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1800596110088783-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1800596110088783-5\">5</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1800596110088783-1\"><span class=\"crayon-i\">target</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'MyApp'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1800596110088783-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">use_frameworks</span><span class=\"crayon-o\">!</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1800596110088783-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-i\">pod</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'NexmoClient'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1800596110088783-4\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1800596110088783-5\">&nbsp;</div></div></td></tr></tbody></table>\n\nClose all Xcode instances and update the CocoaPods dependencies by executing the following in the terminal:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">pod update</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1800598242131734-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1800598242131734-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1800598242131734-1\"><span class=\"crayon-e\">pod </span><span class=\"crayon-i\">update</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1800598242131734-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nGoing forward, make sure you’re launching the newly created `MyApp.xcworkspace` rather than the `MyApp.xcproject` file.\n\n### Adding required permissions\n\nThe call button will perform a call, therefore make sure to enable the microphone usage permission. When the call button is pressed, a permission request will be presented to the user requesting access to record audio. This permission request is already implemented by the button.\n\nIn addition, you need to state why the microphone permission is necessary. Open Xcode, then open `Info.plist`. Right-click and choose the _Add Row_ option, then insert `NSMicrophoneUsageDescription` as the key for the row. The row value should be a string describing the reason your app wants to access the microphone (e.g, “Audio Calls”).\n\n![Adding microphone usage permission to Info.plist](https://i.imgur.com/N2h46i2.png)\n\nNow you can go straight ahead to the fun stuff! Let’s add the button to the UI.\n\n## Adding and Configuring the Custom UI Component\n\n### Adding the custom UIButton\n\nCreate a new empty Swift file named `NXMCallButton.swift` in your project and copy the contents of the following GitHub Gist:  \n[https://raw.githubusercontent.com/nexmo-community/client-sdk-call-button/master/NXMCallButton.swift](https://raw.githubusercontent.com/nexmo-community/client-sdk-call-button/master/NXMCallButton.swift)\n\nYou can now add the `NXMCallButton` component to the user interface in one of two ways: using the storyboard or adding the button programmatically.\n\n#### Method 1: Using the Storyboard\n\n1.  Open `Main.storyboard`.\n    \n2.  Select a `Button` object from the object library and add it to the interface:  \n    ![Adding a button object to the interface](https://i.imgur.com/a0uSJgX.png)\n    \n3.  Change the custom class of the UIButton to `NXMCallButton`:  \n    ![Changing custom class to NXMCallButton](https://i.imgur.com/eyw8RYb.png)\n    \n4.  Configure the inspectable parameters of the button:\n    \n\n*   `Nexmo Token` should be a valid [JWT Token](https://developer.nexmo.com/conversation/guides/user-authentication) you use to authenticate your Nexmo Client instance.\n*   `Callee` should be a PSTN phone number or a username of a user in your app that will be called when the button is pressed.\n\nNote: If you want to change the `Nexmo Token` and `Callee` parameters dynamically, you can follow the steps in the next section.\n\n#### Method 2: Adding the Call Button Programmatically\n\nAdding the call button programmatically allows you to change its properties, such as `callee` and `nexmoToken`, dynamically. In addition to calling the desired destination, more actions can be added for when the button is pressed—for example, switching to a different view.\n\nTo add the button programmatically to a view controller, you need to do the following steps:\n\n1.  Create a new instance of `NXMCallButton`.\n2.  Set values for its `title` and `callee` properties.\n3.  Authenticate your Nexmo Client instance by using the `login(withAuthToken:)` method of `NXMClient.shared`.\n4.  Optionally, perform any additional UI setup you wish, such as configuring a background color and constraints. As `NXMCallButton` inherits from `UIButton`, all `UIButton`‘s properties are available for you to use.\n5.  If desired, add additional actions to the button—for example, trigger a segue to a different view when the button is pressed.\n6.  Add the call button to your view.\n\nHere is how it looks inside a `UIViewController`:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">import UIKit import NexmoClient class ViewController: UIViewController { override func viewDidLoad() { super.viewDidLoad() // new instance of NXMCallButton let callButton = NXMCallButton() // set values for the button's title and callee callButton.setTitle(\"Call\", for: .normal) callButton.callee = \"15555551234\" // Phone Number or username // Authentication NexmoClient.shared.login(withAuthToken: \"YOUR_JWT_TOKEN\") // Optional UI Setup callButton.backgroundColor = .lightGray // A target which performs a call when the button is pressed is already added // callButton.addTarget(self, action: #selector(callButtonAction), for: .touchUpInside) // Add button to UI callButton.translatesAutoresizingMaskIntoConstraints = false self.view.addSubview(callButton) // Add your desired layout constrains, for example: NSLayoutConstraint.activate([ callButton.leadingAnchor.constraint(equalTo: self.view.safeAreaLayoutGuide.leadingAnchor), callButton.trailingAnchor.constraint(equalTo: self.view.safeAreaLayoutGuide.trailingAnchor), callButton.topAnchor.constraint(equalTo: self.view.safeAreaLayoutGuide.bottomAnchor,constant: -30), callButton.bottomAnchor.constraint(equalTo: self.view.safeAreaLayoutGuide.bottomAnchor), ]) } @objc func callButtonAction(sender: UIButton!) { print(\"Button tapped\") } }</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059b479856378-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059b479856378-38\">38</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">UIKit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">NexmoClient</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ViewController</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">UIViewController</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">override </span><span class=\"crayon-e\">func </span><span class=\"crayon-e\">viewDidLoad</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">viewDidLoad</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-6\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// new instance of NXMCallButton</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">callButton</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NXMCallButton</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-9\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// set values for the button's title and callee</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setTitle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Call\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">normal</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">callee</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"15555551234\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// Phone Number or username</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-13\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Authentication</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">NexmoClient</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">shared</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">withAuthToken</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"YOUR_JWT_TOKEN\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-16\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Optional UI Setup</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">backgroundColor</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lightGray</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-19\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// A target which performs a call when the button is pressed is already added</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// callButton.addTarget(self, action: #selector(callButtonAction), for: .touchUpInside)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Add button to UI</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">translatesAutoresizingMaskIntoConstraints</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addSubview</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-25\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Add your desired layout constrains, for example:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">NSLayoutConstraint</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">activate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">leadingAnchor</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">constraint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">equalTo</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">safeAreaLayoutGuide</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">leadingAnchor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">trailingAnchor</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">constraint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">equalTo</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">safeAreaLayoutGuide</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">trailingAnchor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">topAnchor</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">constraint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">equalTo</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">safeAreaLayoutGuide</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bottomAnchor</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">constant</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bottomAnchor</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">constraint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">equalTo</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">safeAreaLayoutGuide</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bottomAnchor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">objc </span><span class=\"crayon-e\">func </span><span class=\"crayon-e\">callButtonAction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sender</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">UIButton</span><span class=\"crayon-o\">!</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Button tapped\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059b479856378-37\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059b479856378-38\">&nbsp;</div></div></td></tr></tbody></table>\n\nIt is also possible to execute a completion handler after a call has been started. It is a good practice to present a message to the user that a call has started or to display a different screen.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">let myCallCompletionHandler = { (error: Error?, call: NXMCall?) in if (error != nil) { // Handle error } else { // Handle success // For example: switch to a different view presenting a call session } } callButton.callCompletionHandler = myCallCompletionHandler</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059e504638732-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059e504638732-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059e504638732-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059e504638732-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059e504638732-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059e504638732-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059e504638732-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059e504638732-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc180059e504638732-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc180059e504638732-10\">10</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc180059e504638732-1\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">myCallCompletionHandler</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Error</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">call</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NXMCall</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059e504638732-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nil</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059e504638732-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Handle error</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059e504638732-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059e504638732-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// Handle success</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059e504638732-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// For example: switch to a different view presenting a call session</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059e504638732-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059e504638732-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc180059e504638732-9\"><span class=\"crayon-v\">callButton</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">callCompletionHandler</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">myCallCompletionHandler</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc180059e504638732-10\">&nbsp;</div></div></td></tr></tbody></table>\n\n## Summary\n\nIn this tutorial, we have reviewed the process of integrating calls to an app by using a custom `NXMCallButton` component. We have walked through two ways to do this: via the interface builder without a single line of code, and programmatically, having the freedom to modify and configure it dynamically.\n\nIf you want to see the magic happen before your eyes, set the callee to your phone number, run the app, and click the dial button. A quick reminder that an answer webhook is required to enable calling—see [this tutorial](https://developer.nexmo.com/client-sdk/tutorials/app-to-phone/client-sdk/app-to-phone/create-webhook-server) as an example.\n\n## Further Reading\n\n*   [Nexmo SDKs and Tools](https://developer.nexmo.com/tools)\n*   [NXMCallButton.swift on GitHub](https://github.com/nexmo-community/client-sdk-call-button)\n*   [In-app messaging using the Nexmo Client SDK](https://developer.nexmo.com/client-sdk/in-app-messaging/overview)\n\nCopyright (c) 2020 Vonage. All rights reserved."}