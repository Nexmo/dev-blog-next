{"_filedata":{"slug":"how-to-send-sms-messages-with-elixir-dr"},"title":"How to Send SMS Messages With Elixir","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/02/E_SMS-Elixir_1200x600.png","author":301,"published":true,"published_at":"2020-02-12T09:51:46","tags":[360,1673,92,455,934],"body":"SMS continues to drive much of our global communication today, and with the new experimental [Nexmo Elixir SDK](https://github.com/nexmo-community/nexmo-elixir) you can get started sending SMS messages in Elixir. All you need is a Nexmo account, a virtual phone number, and a few lines of code.\n\nIn this tutorial, we will walk through the steps to send your first SMS message in Elixir. You only need a basic understanding of Elixir to get started—we’ll do the rest together!\n\nIf you prefer, you can also [clone a fully working version](https://github.com/nexmo-community/nexmo-elixir-send-sms) of this code on GitHub.\n\n## Prerequisites\n\nFor this tutorial you will need the following:\n\n*   A [Nexmo account](https://dashboard.nexmo.com/sign-up?utm_source=DEV_REL&utm_medium=github&utm_campaign=https://github.com/nexmo-community/nexmo-elixir-send-sms)\n*   [Elixir](https://elixir-lang.org/) installed on your computer\n\nIt is free to [sign up for a Nexmo account](https://dashboard.nexmo.com/sign-up?utm_source=DEV_REL&utm_medium=github&utm_campaign=https://github.com/nexmo-community/nexmo-elixir-send-sms), and it comes with complimentary credit so you can get started right away.\n\n## Your Nexmo Credentials and Phone Number\n\nIn order to send an SMS, you need to obtain your Nexmo API key and secret. You also need to set up a Nexmo provisioned virtual phone number. Let’s do that together now.\n\n### Your API Credentials\n\nOnce you have signed into the [Nexmo Dashboard](https://dashboard.nexmo.com), you will see your API credentials at the very top of the page.\n\n![](https://www.nexmo.com/wp-content/uploads/2020/01/api-credentials.png)\n\nTake note of them and save them somewhere safe, we will be using them in just a moment.\n\n### Your Virtual Phone Number\n\nOur next step in getting ready to send an SMS is to provision a virtual phone number. From the Nexmo Dashboard, you will see a drop-down link called `Numbers` in the left sidebar. When you click on it, the drop-down will expand and you will see several options. Click on the option entitled `Buy Numbers`.\n\n![](https://www.nexmo.com/wp-content/uploads/2020/01/buy-numbers-sidebar.png)\n\nOnce you navigate to the `Buy Numbers` section you will be able to search for a phone number based on `Country`, `Features`, `Type`. You can also narrow it down to display only phone numbers with specific combinations of numbers.\n\n![](https://www.nexmo.com/wp-content/uploads/2020/01/buy-numbers-search.png)\n\nSearch for a phone number with a country code that is convenient for you. You only need `SMS` for `Features` and a `Type` of `Mobile`. After you click on the `Search` button, you will see a list of potential numbers. You can choose any you like by clicking the orange colored `Buy` button on the right-hand side.\n\n![](https://www.nexmo.com/wp-content/uploads/2020/01/buy-number-button.png)\n\nYou have now successfully provisioned a Nexmo virtual phone number. As you did with your API credentials, copy your new phone number somewhere safe. We will be using it in our next step as we send our first SMS with Elixir.\n\n## Sending an SMS With Elixir\n\n### Setting up Our Code Structure\n\nFrom your terminal create a new directory to house your Elixir project, then navigate into that directory. For the sake of this tutorial, we will call it `send-sms-elixir`.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">mkdir send-sms-elixir cd send-sms-elixir</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde69c896909729-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde69c896909729-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde69c896909729-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde69c896909729-4\">4</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde69c896909729-1\"><span class=\"crayon-e\">mkdir </span><span class=\"crayon-v\">send</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sms</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">elixir</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde69c896909729-2\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde69c896909729-3\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">send</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sms</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">elixir</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde69c896909729-4\">&nbsp;</div></div></td></tr></tbody></table>\n\nWe will need three files for our project. As a reminder, if you are planning to commit this project to public version control, make sure you do not check in your `.env` file, as it contains your sensitive credential information.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">touch mix.exs send-sms.ex .env</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a0206524267-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a0206524267-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a0206524267-1\"><span class=\"crayon-e\">touch </span><span class=\"crayon-v\">mix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exs </span><span class=\"crayon-v\">send</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ex</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">env</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a0206524267-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nOnce you are finished you should have three files inside your `./send-sms-elixir` folder:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">├── mix.exs ├── send-sms.ex ├── .env</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a1479280809-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a1479280809-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a1479280809-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a1479280809-4\">4</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a1479280809-1\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">mix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">exs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a1479280809-2\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-v\">send</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">ex</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a1479280809-3\">├──<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">env</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a1479280809-4\">&nbsp;</div></div></td></tr></tbody></table>\n\n### Defining Our Mix File\n\nEvery Elixir project that has an external dependency needs to create a Mix file that installs that dependency into your project. Mix, for those unfamiliar, is similar to Bundler in Ruby or npm in Node.js.\n\nWithin our `mix.exs` file we will define the name of our project and two dependencies, which are the experimental Nexmo Elixir SDK and Envy, a Hex package that helps us manage our environment variables:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">defmodule SendSms.Mixfile do use Mix.Project def project do [app: :send_sms, version: \"0.0.1\", deps: deps] end defp deps do [ {:nexmo, \"0.4.0\", hex: :nexmo_elixir}, {:envy, \"~&gt; 1.1.1\"} ] end end</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a2940865559-17\">17</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-1\"><span class=\"crayon-e\">defmodule </span><span class=\"crayon-v\">SendSms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Mixfile </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Project</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-3\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-4\"><span class=\"crayon-e\">&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">project </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">app</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">send_sms</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"0.0.1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-v\">deps</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">deps</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-9\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">defp</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">deps</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">nexmo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"0.4.0\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hex</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">nexmo_elixir</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">envy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"~&gt; 1.1.1\"</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a2940865559-16\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a2940865559-17\">&nbsp;</div></div></td></tr></tbody></table>\n\n### Defining Our Environment Variables\n\nWe previously created our Nexmo virtual phone number and obtained our Nexmo API credentials. Now we are going to integrate them into our application by storing them in our `.env` file. Inside your `.env` file put the following, supplying your API key, API secret, and Nexmo phone number in the appropriate places:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">NEXMO_API_KEY= NEXMO_API_SECRET= NEXMO_NUMBER= SMS_API_ENDPOINT=\"https://rest.nexmo.com/sms/json\"</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a4384653210-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a4384653210-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a4384653210-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a4384653210-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a4384653210-5\">5</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a4384653210-1\"><span class=\"crayon-v\">NEXMO_API_KEY</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a4384653210-2\"><span class=\"crayon-v\">NEXMO_API_SECRET</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a4384653210-3\"><span class=\"crayon-v\">NEXMO_NUMBER</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a4384653210-4\"><span class=\"crayon-v\">SMS_API_ENDPOINT</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://rest.nexmo.com/sms/json\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a4384653210-5\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn addition to our API key, secret and phone number, we also provide the Nexmo SMS API endpoint in our `.env` file to be used by the SDK.\n\n### Defining Our Elixir Code\n\nNow we are ready to create the code that will send our first SMS! Open up the `send_sms.ex` file and add the following:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">defmodule SendSms do use Application def start(_type, _args) do unless Mix.env == :prod do Envy.auto_load end end def send_msg(to_number, message) Nexmo.Sms.send( from: System.get_env(\"NEXMO_NUMBER\"), to: to_number, text: message ) end end</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a5496706738-18\">18</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-1\"><span class=\"crayon-e\">defmodule </span><span class=\"crayon-e\">SendSms </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Application</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-3\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-4\"><span class=\"crayon-e\">&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">start</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_type</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">unless </span><span class=\"crayon-v\">Mix</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">env</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">prod </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Envy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">auto_load</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-7\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-9\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">send_msg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">to_number</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Nexmo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Sms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">from</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_env</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"NEXMO_NUMBER\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">to_number</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">message</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">end</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a5496706738-17\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a5496706738-18\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn the above, we define a module called `SendSms` that has a `SendSms.start/2` function that loads our environment variables from the `.env` file using the Envy package.\n\nThen we create a second function called `SendSms.send/2` that accepts an argument of the recipient number we wish to send the text to and the actual message. Within the function, we call the Nexmo Elixir SDK `Nexmo.Sms.send/1` function and pass in our Nexmo virtual number (stored as an environment variable), the `to_number`, and the `message`.\n\nThat’s it! We are now ready to run our code and send the message.\n\n### Running The Application\n\nThe simplest way for you to run your application and send an SMS is to load your project in iex, an interactive Elixir shell.\n\nLet’s first compile our `send_sms.ex` file, which will make the `send_msg/2` function available inside the shell. To compile it all we need to do is run from the command line: `elixirc send_sms.ex`. That should only take a moment, and once it is finished we can run our application inside iex.\n\nTo run your project in iex from your command line execute the following: `iex -S mix`. This will start your project and launch it inside the shell.\n\nYou will see a shell prompt that looks like this:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">Interactive Elixir (1.9.2) - press Ctrl+C to exit (type h() ENTER for help) iex(1)&gt;</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a6852053457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a6852053457-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a6852053457-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a6852053457-1\"><span class=\"crayon-e\">Interactive </span><span class=\"crayon-e\">Elixir</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1.9.2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">press </span><span class=\"crayon-v\">Ctrl</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exit</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">h</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ENTER </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">help</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a6852053457-2\"><span class=\"crayon-e\">iex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"></span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a6852053457-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nAt this point, you can send your SMS!\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">iex(1)&gt; SendSms.send_msg(RECIPIENT_NUMBER, \"This is powered by Nexmo on Elixir!\")</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bde6a8919217711-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bde6a8919217711-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bde6a8919217711-1\"><span class=\"crayon-e\">iex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SendSms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_msg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">RECIPIENT_NUMBER</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"This is powered by Nexmo on Elixir!\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bde6a8919217711-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nYou will receive back from the Nexmo SMS API confirmation that you sent the message successfully with an HTTP status code of 200.\n\nCongratulations, you did it!\n\n## Further Reading\n\nIf you are interested in exploring more on SMS and Nexmo, feel free to check out the following:\n\n*   [SMS API Overview](https://developer.nexmo.com/messaging/sms/overview)\n*   [Receiving Concatenated SMS](https://developer.nexmo.com/use-cases/receiving-concat-sms)\n*   [SMS API Reference](https://developer.nexmo.com/api/sms)"}