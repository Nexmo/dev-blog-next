{"_filedata":{"slug":"forward-call-via-voice-proxy-node-red-dr"},"title":"Forward a Call via a Voice Proxy with Node-RED","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2019/10/forward-call-featured.png","author":256,"published":true,"published_at":"2019-10-17T08:09:37","tags":[679,1631,1632,1168,1630,1629,1634,1633],"body":"In this tutorial we’ll be using the Nexmo Voice API to make private calls, by forwarding a call via a voice proxy, and as an additional bonus we’re also going to add a recording feature to it at the end.\n\nIf you’ve ever wondered how you can contact your ride share driver, Airbnb host or courier without knowing their number, or you’re simply interested in making private calls, follow along and find out how this is done!\n\n## Dependencies\n\n### Prerequisites\n\nBefore getting started, you’ll need a few things:\n\n*   [Node.js](https://nodejs.org/en/) and [Node-RED](https://nodered.org/docs/getting-started/installation) installed, if you’re developing locally\n*   A Nexmo account — [create one for free](https://dashboard.nexmo.com/sign-up) if you haven’t already\n*   A way to expose your server to the internet. This either means you’re running a hosted version of Node-RED, or using a tunnelling service like [ngrok](https://flows.nodered.org/node/node-red-contrib-ngrok) – get up to speed with this [Getting Started with Ngrok in Node-RED](https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/) tutorial\n\n### Getting Your Credentials\n\nTo use the Nexmo nodes in Node-RED you’ll have to provide your credentials, so it’s best to keep them handy. Go to your [dashboard](https://dashboard.nexmo.com) to find your API key and secret and make a note of them.\n\nNext, you’ll need a _Voice-enabled_ virtual number. Go to Numbers > [Buy numbers](https://dashboard.nexmo.com/buy-numbers) to get one.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/04/buy-number-nexmo-dashboard.gif)\n\n### Setting Up Your Node-RED Editor\n\nAccess your Node-RED editor by pointing your browser at [http://localhost:1880](http://localhost:1880).\n\nOnce you have the editor open, you’ll need to install the Nexmo nodes. You can do so under the _Manage palette_ menu, by searching for the `node-red-contrib-nexmo` package and clicking install.\n\nNow you should see all of the Nexmo nodes appear on the left side of your screen – in your node palette, among other default nodes.\n\n## Expose Your Local Server to the Internet\n\nIn case you’re not using a hosted version of Node-RED, the Nexmo Voice API will need another way to access your webhook endpoints, so let’s [make your local server accessible over the public internet](https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/). If you’re running Node-RED on a public web server instead of your local machine, you’re all set and ready to move on to the [_Create a Nexmo Voice Application_](link_me) step.\n\nA convenient way to do this is by using a tunneling service like [ngrok](https://ngrok.com), and there is a [node](https://flows.nodered.org/node/node-red-contrib-ngrok) for it that you can install directly from your editor.\n\nFeel free to also check out our tutorial on [Getting Started with Ngrok in Node-RED](https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/) to find out more.\n\nOnce you’ve installed the ngrok node and restarted your editor, the **`ngrok`** node should appear in you node palette. It takes the strings **on** or **off** as input to start/stop the tunnel, and outputs the ngrok host address as the _msg.payload_.\n\n_Import_ from _Clipboard_ the snippet below, or have a stab at building this path yourself.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">[ { \"id\": \"faed0f7.1e524f\", \"type\": \"inject\", \"z\": \"5b8bbfc3.1a9f18\", \"name\": \"\", \"topic\": \"\", \"payload\": \"on\", \"payloadType\": \"str\", \"repeat\": \"\", \"crontab\": \"\", \"once\": false, \"onceDelay\": 0.1, \"x\": 190, \"y\": 100, \"wires\": [ [ \"8a01baeb.6756d\" ] ] }, { \"id\": \"11051fa9.75bd1\", \"type\": \"inject\", \"z\": \"5b8bbfc3.1a9f18\", \"name\": \"\", \"topic\": \"\", \"payload\": \"off\", \"payloadType\": \"str\", \"repeat\": \"\", \"crontab\": \"\", \"once\": false, \"onceDelay\": 0.1, \"x\": 190, \"y\": 160, \"wires\": [ [ \"8a01baeb.6756d\" ] ] }, { \"id\": \"8a01baeb.6756d\", \"type\": \"ngrok\", \"z\": \"5b8bbfc3.1a9f18\", \"port\": \"1880\", \"creds\": \"5a9e2b8c.173a2c\", \"region\": \"ap\", \"subdomain\": \"\", \"name\": \"\", \"x\": 400, \"y\": 140, \"wires\": [ [ \"93fd5675.743c1\" ] ] }, { \"id\": \"93fd5675.743c1\", \"type\": \"debug\", \"z\": \"5b8bbfc3.1a9f18\", \"name\": \"\", \"active\": true, \"tosidebar\": true, \"console\": false, \"tostatus\": false, \"complete\": \"false\", \"x\": 620, \"y\": 140, \"wires\": [] }, { \"id\": \"5a9e2b8c.173a2c\", \"type\": \"ngrokauth\", \"z\": \"\" } ]</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1ff21c2623332639-79\">79</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-1\"><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"faed0f7.1e524f\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"inject\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payload\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"on\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payloadType\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"str\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"repeat\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"crontab\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"once\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"onceDelay\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">190</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"8a01baeb.6756d\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"11051fa9.75bd1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"inject\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payload\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"off\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payloadType\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"str\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"repeat\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"crontab\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"once\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"onceDelay\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">190</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">160</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"8a01baeb.6756d\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-41\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-42\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"8a01baeb.6756d\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ngrok\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-46\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"port\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1880\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-47\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"creds\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5a9e2b8c.173a2c\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-48\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"region\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ap\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-49\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"subdomain\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-50\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-51\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-52\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-53\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-54\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-55\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"93fd5675.743c1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-56\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-57\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-58\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-59\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-60\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"93fd5675.743c1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-61\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"debug\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-62\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-63\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-64\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"active\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-65\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"tosidebar\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-66\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"console\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-67\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"tostatus\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-68\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"complete\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"false\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-69\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">620</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-70\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-71\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-72\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-73\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-74\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5a9e2b8c.173a2c\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-75\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ngrokauth\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-76\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-77\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1ff21c2623332639-78\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1ff21c2623332639-79\">&nbsp;</div></div></td></tr></tbody></table>\n\nAt this point, your editor should look similar to this:\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/ngrok-path.png)\n\nAs the last step before hitting **Deploy**, open up the **`ngrok`** node properties and specify the port number (`1880` for Node-RED) and the Region.\n\nYou can also add your authtoken for your ngrok account if you have one. Don’t worry if you don’t, just skip this step for now. The node will warn that it is not fully configured but this is not an issue.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/ngrok-properties.png)\n\nHit **Deploy** and click on the **on** **`inject`** node’s button, then navigate to the URL displayed in the debug area (YOUR\\_URL for future reference) to find your Node-RED editor at a public address.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/ngrok-nodered-1.png)\n\n## Create a Nexmo Voice Application\n\nSome of Nexmo’s APIs, including the Voice API, use Nexmo Applications to hold security and config information needed to connect to Nexmo endpoints.\n\nIn the Nexmo Node-RED palette, several nodes have the capability to create these applications: **`getrecording`**, **`earmuff`**, **`mute`**, **`hangup`**, **`transfer`**, **`createcall`**, **`playaudio`**, **`playtts`** and **`playdtmf`**.\n\nDrag any of these nodes into your workspace, then double-click on it to open up the node properties.\n\nNext to the `Nexmo Credentials`, select “Add new nexmovoiceapp…” from the drop-down menu and click the edit button. Fill in the details below and click _Create New Application_.\n\n| KEY | DESCRIPTION |\n| --- | --- |\n| `Name` | Choose a name for your Voice Application, for example “Nexmo Voice Application”. |\n| `API Key` | Your Nexmo API key, shown in your [account overview](https://dashboard.nexmo.com/getting-started-guide). |\n| `API Secret` | Your Nexmo API secret, shown in your [account overview](https://dashboard.nexmo.com/getting-started-guide). |\n| `Answer URL` | YOUR\\_URL/answer, you’ll be hosting a Nexmo Call Control Object (NCCO) here. – more about this later on. |\n| `Event URL` | YOUR\\_URL/event, you’ll need to reference this when setting up the event handler. |\n\nNode-RED will then create a new Nexmo Application on your account and fill in the App ID and Private Key fields. After this step, feel free to delete the Nexmo node you used, as a `nexmovoiceapp` config node has been created, and that contains all the Nexmo credentials this flow needs.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/create-voiceapp.png)\n\n## Set Up a Number to Call\n\nNext, you’ll have to link your virtual number to this application.\n\nFind the Voice Application you’ve just created in your Nexmo Dashboard by navigating to _Voice_ > _[Your Applications](https://dashboard.nexmo.com/voice/your-applications)_.\n\nClick on the name of this application, then under the _Numbers_ tab click on the **Link** button next to the virtual number you’ve rented earlier.\n\nIn case the number you’d like to use is already linked to another app, click on **Manage number** and configure it to forward incoming calls to your app.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/link-number.png)\n\n_Bonus tip:_ Use a **`comment`** node to take note of the Nexmo number linked to your application, this way you always have it handy.\n\n## Handle Inbound Calls\n\nWhen you receive an inbound call, the Nexmo Voice API makes a `GET` request to an endpoint you define, `YOUR_URL/answer`, and expects a set of instructions on how to handle the call.\n\nThese instructions come in the form of a _Nexmo Call Control Object_, also known as NCCOs.  \nThere are lots of different actions available, find the corresponding nodes under the Nexmo palette in your Node-RED editor or check out the [NCCO Reference](https://developer.nexmo.com/api/voice/ncco) to find out more about them.\n\nFor this tutorial we’ll be using the `connect` action, so that when the inbound call is received, it gets connected to a new phone number we specify.\n\n### Define the Webhook Endpoint for Inbound Calls\n\nAdd a _`voice webhook`_ and a _`return ncco`_ node to your workspace, and wire them together to define a webhook endpoint.\n\nNext, open up the _`voice webhook`_ node properties, select `GET` as a `Method` and type `/answer` in the `URL` field, then press _Deploy_.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/inbound-webhook.png)\n\nGreat! Now you have a webhook that returns an NCCO to Nexmo’s API. At this point it doesn’t contain any actions, so let’s add one!\n\n### Build the Nexmo Call Control Object\n\nTo forward the incoming call, we need to connect it to a new endpoint. To do so, we need a `connect` action.\n\nAdd a _`connect`_ node in between the _`voice webhook`_ and a _`return ncco`_ nodes. This will add a connect action to the NCCO.\n\nOpen up the _`connect`_ node editor, select `Phone` as an `Endpoint`and type in the number you’d lilke to call in the `Number {}` field.\n\nLeave the `From {}` field empty for the Caller ID to appear as unknown, or fill it in with one of your Nexmo virtual numbers.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-connect-node.png)\n\nTo find out more about the other parameters and the `connect` action, check out the [NCCO Reference](https://developer.nexmo.com/voice/voice-api/ncco-reference#connect).\n\n## Log Call Events\n\nFinally, connect an `http in` node to an `http response` node, as well as to a `debug` node, so that you can view your call events in the debug area.\n\nIn the `http` input node, select `POST` as a `Method` and fill in the `URL` field with `/event`.\n\nThe `http response` node should have `200` set as `Status code`, but don’t worry about it, this is the default value as well.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-flow.png)\n\nNow call your Nexmo number and follow your call events in the debug sidebar!\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-call-events_.gif)\n\n## Add a Recording Feature\n\nWhen making business phone calls, it’s often helpful to have the option to also record them. So let’s have a look at how we can transform the flow above to give us a recording of the conversation.\n\n### Update the NCCO\n\nFirst, we’ll need a `record` action added to the Nexmo Call Control Object.\n\nRecording starts when the record action is executed in the NCCO and finishes when the synchronous condition in the action is met. That is, `End On Silence`, `timeOut` or `endOnKey`.\n\nIf you do not set a synchronous condition, the Voice API immediately executes the next NCCO without recording.\n\nIn our use case, this means that we need to add a _`record`_ node before the _`connect`_ node, and no `End On Silence`, `Time Out` or `End On Key` values should be set.\n\nGo ahead and add a _`record`_ node to your flow, between the _`voice webhook`_ and _`connect`_ nodes.\n\nOpen up its properties, fill in the `URL {}` field with something like `YOUR_URL/record`, select `POST` as a `Method` and pick a `Format` for the recording file – I’ll go with `MP3`. You could also tick `Beep Start` to have a clear indication of when exactly the recording starts.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-record-node.png)\n\n### Add Handler for the Recording eventURL\n\nNext, we need to add a handler for the recording eventURL – `YOUR_URL/record`.  \nThis way we receive the event on completion of recording, and then be able to download said recording to our machine.\n\nAdd an `http in` node and an `http response` node to your workspace and wire them together. Consider also adding a `debug` node to see what’s coming through the recording eventURL.  \nIn the `http` input node, select `POST` as a `Method` and fill in the `URL` field with `/record`.\n\nThe `http response` node should have `200` set as `Status code`, but this is the default value as well.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-record-event.png)\n\n### Download Recording\n\nOnce the recording has completed, Nexmo sends us the recording URL in the recording event webhook . The last step is fetching the recording and downloading it.\n\nFor this step we’ll need a _`getrecording`_ node to fetch the recording audio from the supplied URL, and a _`file`_ node to write it to a file on our machine.\n\nAdd a _`getrecording`_ node after the `/record` _`http in`_ node, then in its node properties select the voice application created earlier from the `Nexmo Credentials` drop-down and provide an absolute path as `Filename {}`.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-getrecording.png)\n\nAnd finally, add a _`file`_ node after _`getrecording`_. In its node editor, make sure the _Create directory if it doesn’t exist?_ option is ticked and select either _overwrite_ or _append to file_ from the `Action` drop-down. Leave the `Filename` field empty, as this value will be passed in from the _`getrecording`_ node, in `{{msg.filename}}`.\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-file-node.png)\n\nThat’s a wrap! Get a second device or have a friend call your Nexmo number, have a conversation and once you’re done, the recording file will be waiting for you, already domnloaded to your machine. Enjoy!\n\n![](https://www.nexmo.com/wp-content/uploads/2019/10/forward-recording-download_.gif)\n\n## Where Next?\n\n### Further Reading\n\n*   [Voice API Reference](https://developer.nexmo.com/voice/voice-api/overview)\n*   [Record NCCO Reference](https://developer.nexmo.com/voice/voice-api/ncco-reference#record)\n*   [Connect NCCO Reference](https://developer.nexmo.com/voice/voice-api/ncco-reference#connect)\n*   [Get Started with ngrok in Node-RED](https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/)\n\n### Try Another Tutorial\n\n*   [Build a Conference Call with Node-RED](https://www.nexmo.com/blog/2019/10/07/conference-call-node-red-dr)\n*   [Verify Phone Numbers with Node-RED](https://www.nexmo.com/blog/2019/09/25/verify-phone-numbers-with-node-red-dr)\n*   [How to Stream Audio into a Call with Node-RED](https://www.nexmo.com/blog/2019/07/15/stream-audio-node-red-dr)\n*   [How to Make Text-to-Speech Phone Calls with Node-RED](https://www.nexmo.com/blog/2019/06/14/make-text-to-speech-phone-calls-node-red-dr/)\n*   [How to Receive Phone Calls with Node-RED](https://www.nexmo.com/blog/2019/05/09/receive-phone-calls-node-red-dr/)\n*   [How to Send SMS Messages with Node-RED](https://www.nexmo.com/blog/2019/04/17/send-sms-messages-node-red-dr/)\n*   [How to Receive SMS Messages with Node-RED](https://www.nexmo.com/blog/2019/04/24/receive-sms-messages-node-red-dr/)\n\nwindow.addEventListener('DOMContentLoaded', (event) => { document.querySelectorAll(\".gif-player\").forEach(image => { image.src = image.src.replace(/\\\\.gif$/g, \".png\") image.addEventListener(\"click\", (event) => { if (event.target.src.indexOf(\".gif\") > 0) { image.src = image.src.replace(/\\\\.gif$/g, \".png\") } else { image.src = image.src.replace(/\\\\.png$/g, \".gif\") } }) }) });\n\n.gif-player { cursor: pointer; } img.alignnone { border-width: 0px !important; } .crayon-syntax { height: 400px !important; overflow: scroll !important; }"}