{"_filedata":{"slug":"adaptive-library-logging-with-microsoft-extensions-logging-dr"},"title":"Adaptive Library Logging with Microsoft.Extensions.Logging","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/02/E_Love-the-Log_1200x600.png","author":349,"published":true,"published_at":"2020-02-10T13:47:01","tags":[385,1676,1677],"body":"## How I Learned to Stop Worrying and Love to Log\n\nIn my career, I’ve worked on a few different medium to large scale .NET projects. With each project I saw a different type of logger, and typically all of them used more than one logger!\n\nUsually, the story goes something like this: “In the early days we couldn’t decide which logger we wanted to use, so we built our own. Then we realized the way we’d implemented the logging was not the most efficient, so we switched over to X logger as the app scaled. We didn’t want to go back and remove the old logger because that would involve us touching every file in our solution, so we just removed it from the places where the old logger was causing problems, and from now on we’re just going to be using X logger for everything.”\n\nAs I said, this is a surprisingly common problem—and one we can sidestep by abstracting the logger from the logging.\n\n## Logging In the Nexmo .NET Library\n\nRecently I’ve been taking a look at Nexmo’s [.NET Server SDK](https://github.com/Nexmo/nexmo-dotnet) and have been cleaning some things up. Whilst doing this I noticed is that our logging framework [LibLog](https://github.com/damianh/LibLog) has been deprecated.\n\nThis tool was great, as it abstracted the logger from the operation of logging. It allowed anyone developing against our SDK to bring their own logger. So long as your logger was supported, you could have the SDK’s logger piggyback on your logger of choice without any intervention (which realistically could be a pro or con depending on how you look at it).\n\nBecause of LibLog’s deprecation, I was forced to look elsewhere for a logging tool to meet our needs. Fortunately, I didn’t need to look far.\n\n## Moving Forward With Microsoft.Extensions.Logging\n\nThe (relatively) new [Microsoft.Extensions.Logging](https://www.nuget.org/packages/Microsoft.Extensions.Logging/) package hit the nail on the head with functionality. With the extension package, you can simply install the NuGet package, along with whatever logging framework you’ve chosen to use, set up a factory, and create the logger.\n\nThis suits our use case as we don’t necessarily want our logs to automatically piggyback onto and interleave into our users’ logs—and at the same time we don’t want to dictate to our users exactly where, how, and with what framework the logs will be captured.\n\nSo now with our next major version release, 5.0.0, you will be able to activate whatever level or category you want within the SDK dynamically by simply swapping out the Logger Factory in the SDK.\n\n## Building Loggers with Microsoft.Extensions.Logging\n\n### Build the Log Provider\n\nTwo components underpin Microsoft.Extensions.Logging: ILoggerFactory and ILogger. The factory generates the loggers and the logger does the logging.\n\nThese two components are used in the LogProvider class to allow us to create a fully dynamic, extensible logger for the library, allowing the developer to bring their own logger.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">public static class LogProvider { private static IDictionary&lt;string, ILogger&gt; _loggers = new Dictionary&lt;string, ILogger&gt;(); private static ILoggerFactory _loggerFactory = new LoggerFactory(); public static void SetLogFactory(ILoggerFactory factory) { _loggerFactory?.Dispose(); _loggerFactory = factory; _loggers.Clear(); } public static ILogger GetLogger(string category) { if (!_loggers.ContainsKey(category)) { _loggers[category] = _loggerFactory?.CreateLogger(category)?? NullLogger.Instance; } return _loggers[category]; } }</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebec317978810-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebec317978810-22\">22</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LogProvider</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IDictionary</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ILogger</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_loggers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Dictionary</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ILogger</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ILoggerFactory </span><span class=\"crayon-v\">_loggerFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LoggerFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-5\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SetLogFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">ILoggerFactory </span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">_loggerFactory</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Dispose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">_loggerFactory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">_loggers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-12\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ILogger </span><span class=\"crayon-e\">GetLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">string</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">_loggers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ContainsKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">_loggers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_loggerFactory</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">CreateLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NullLogger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Instance</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_loggers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebec317978810-21\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebec317978810-22\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn our model, we create a static class called LogProvider with two fields: \\_loggers, a dictionary containing the logger for each category, and \\_loggerFactory, which builds the loggers.\n\nThere are also two methods: SetLogFactory, which disposes of the old LogFactory and sets the log factory to the new log factory passed in, and GetLogger, which checks the \\_loggers to see if that category’s logger has been created, and creates one if it hasn’t.\n\n### Using the Log Provider\n\nNow on the onset of any method that we want to log from we simply have to call GetLogger with the appropriate category:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">var logger = Api.Logger.LogProvider.GetLogger(LOGGER_CATEGORY);</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf1435000747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf1435000747-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf1435000747-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logger</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Api</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">LogProvider</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">GetLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">LOGGER_CATEGORY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf1435000747-2\">&nbsp;</div></div></td></tr></tbody></table>\n\n### Logging\n\nFrom here we simply need to use the logger as any other logger we’ve seen before. For example:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">logger.LogInformation(\"Available authentication: {0}\", string.Join(\",\", authCapabilities));</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf3539958161-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf3539958161-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf3539958161-1\"><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">LogInformation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Available authentication: {0}\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">string</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\",\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">authCapabilities</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf3539958161-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nThis will log as information the available authentication capabilities in whatever format you’ve provided to your logger.\n\n## Configuring adaptive loggers\n\nNow that we’ve covered creating and utilizing the loggers, let’s look at actually configuring them to do what we’d like.\n\n### Select your log provider\n\nOne of the cool things about Microsoft.Extensions.Logging is that it’s agonistic to the log provider that you use. So long as the log provider implements the `ILogProvider` interface it can be whatever it likes. And from the perspective of the developer trying to leverage it, it’s even simpler. Most of the major third party log providers you’re likely to use (e.g. Log4Net, Serilog, NLog, etc.) have Extension packages that make adding the desired logger simple.\n\n### Logging to Console with Serilog\n\nTo demonstrate how we can build these loggers, let’s take the example of logging out the Console with Serilog. To do this you will create a need the following NuGet packages:\n\n*   Microsoft.Extensions.Logging\n*   Serilog.Extensions.Logging\n*   Serilog.Sinks.Console\n\nYou will then do the following:\n\n*   Create a new LoggerFactory which will be what we use to create\n*   Create a new LoggerConfiguration which will set the Serilog configuration\n*   Call the AddSerilog function on the factory\n*   Create a logger of category ‘test’\n*   Log away\n\nChained together this looks like:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">var log = new LoggerConfiguration() .MinimumLevel.Debug() .WriteTo.Console(outputTemplate: \"{Timestamp:HH:mm} [{Level}] ({Name:l}) {Message}\\n\") .CreateLogger(); var factory = new LoggerFactory(); factory.AddSerilog(log); ILogger logger = factory.CreateLogger(\"test\"); logger.LogInformation(\"Hello world\");</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf4662899424-9\">9</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf4662899424-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LoggerConfiguration</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf4662899424-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MinimumLevel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Debug</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf4662899424-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">WriteTo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Console</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">outputTemplate</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"{Timestamp:HH:mm} [{Level}] ({Name:l}) {Message}\\n\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf4662899424-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">CreateLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf4662899424-5\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">factory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LoggerFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf4662899424-6\"><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">AddSerilog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf4662899424-7\"><span class=\"crayon-e\">ILogger </span><span class=\"crayon-v\">logger</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">CreateLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"test\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf4662899424-8\"><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">LogInformation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Hello world\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf4662899424-9\">&nbsp;</div></div></td></tr></tbody></table>\n\nVery clean and simple.\n\nNow to interact with the Nexmo SDK, instead of creating a logger after configuring the factory, simply set the LogFactory in the Log Provider to the log factory you created and added Serilog to, and you’ll see the logging come through from the SDK.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">var log = new LoggerConfiguration() .MinimumLevel.Debug() .WriteTo.Console(outputTemplate: \"{Timestamp:HH:mm} [{Level}] ({Name:l}) {Message}\\n\") .CreateLogger(); var factory = new LoggerFactory(); factory.AddSerilog(log); LogProvider.SetLogFactory(factory);</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdebf6140123949-8\">8</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf6140123949-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LoggerConfiguration</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf6140123949-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MinimumLevel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Debug</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf6140123949-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">WriteTo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Console</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">outputTemplate</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"{Timestamp:HH:mm} [{Level}] ({Name:l}) {Message}\\n\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf6140123949-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">CreateLogger</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf6140123949-5\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">factory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LoggerFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf6140123949-6\"><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">AddSerilog</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdebf6140123949-7\"><span class=\"crayon-v\">LogProvider</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SetLogFactory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdebf6140123949-8\">&nbsp;</div></div></td></tr></tbody></table>\n\nEt Voila—our own highly configurable library logger.\n\n## Benefits\n\nMicrosoft.Extensions.Logging allows us to avoid the nightmare scenario of starting a project using one logger and needing to, for whatever reason, switch to another.\n\nIf you want to use your logger you’re still free to, even while using the Logging Extensions. All you need to do is implement the ILogProvider interface with whatever logger you want to use and add it to the factory."}