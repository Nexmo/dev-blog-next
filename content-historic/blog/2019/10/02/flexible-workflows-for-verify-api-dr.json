{"_filedata":{"slug":"flexible-workflows-for-verify-api-dr"},"title":"Flexible Workflows for Verify API","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2019/10/E_Flexible-Workflows_1200x600-1.jpg","author":247,"published":true,"published_at":"2019-10-02T08:00:01","tags":[89,206,1117],"body":"<p>Nexmo&#8217;s <a href=\"https://developer.nexmo.com/verify/overview\">Verify API</a> is designed to allow you to confirm that a user has supplied a correct and valid phone number, by sending them a PIN code and asking them to input it.</p>\n<p>By default this is done by first sending an SMS with the PIN code in it, and following this with a phone call with a spoken message containing the PIN. Finally, a second phone call is made in an attempt to reach the user.</p>\n<p>Having this multi-step, multi-mode process really improves the success rates of verifying the user&#8217;s phone number. However we know that this isn&#8217;t the best possible workflow for every user so Verify API now has a new feature: Configurable Workflows.</p>\n<h2>Control the Verify Workflow</h2>\n<p>For each user you need to send a PIN code to, the &#8220;right&#8221; workflow might be different. That&#8217;s why Verify API now allows you to specify a <code>workflow_id</code> when you make the API call, allowing you to choose from any of five possible workflow patterns.</p>\n<p>The additional parameter is added alongside the existing ones, so your API call looks something like this (in Node.js):</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd560550219900746\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nnexmo.verify.request({\n  number: RECIPIENT_NUMBER,\n  brand: BRAND_NAME,\n  workflow_id: WORKFLOW_ID\n}, (err, result) =&gt; {\n  if (err) {\n    console.error(err);\n  } else {\n    const verifyRequestId = result.request_id;\n    console.log('request_id', verifyRequestId);\n  }\n});\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd560550219900746-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd560550219900746-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd560550219900746-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd560550219900746-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd560550219900746-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd560550219900746-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd560550219900746-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-1\"><span class=\"crayon-v\">nexmo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">verify</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd560550219900746-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">number</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RECIPIENT_NUMBER</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">brand</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BRAND_NAME</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd560550219900746-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">workflow_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">WORKFLOW</span><span class=\"crayon-sy\">_</span>ID</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd560550219900746-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd560550219900746-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">verifyRequestId</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request_id</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd560550219900746-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'request_id'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">verifyRequestId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd560550219900746-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd560550219900746-13\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<p>You will also find this <a href=\"https://developer.nexmo.com/verify/code-snippets/send-verify-request-with-workflow\">code snippet in other languages</a> on the Nexmo Developer Portal</p>\n<p>The <code>workflow_id</code> can be any integer between 1 and 5, and here are the workflows that these numbers represent:</p>\n<h3>Workflow 1 (Default Workflow): SMS -> TTS -> TTS</h3>\n<p>Send a PIN code by text message, follow up with two subsequent voice calls if the request wasn&#8217;t already verified. This is the default behaviour and probably a sound choice if you&#8217;re not sure which to pick.</p>\n<h3>Workflow 2: SMS -> SMS -> TTS</h3>\n<p>Send a PIN code by text message, follow up with a second text message and finally a voice call if the request has not been verified. For geographies and/or users where SMS is preferable to a voice call.</p>\n<h3>Workflow 3: TTS -> TTS</h3>\n<p>Call the user and speak a PIN code, follow up with a second call if the request wasn&#8217;t already verified. If you already know that a phone call works best for this user&#8217;s situation, a phone call with a retry is a good way to reach them.</p>\n<h3>Workflow 4: SMS -> SMS</h3>\n<p>Send a PIN code by text message, follow up with a second text message if the code hasn&#8217;t been verified. Ideal for users that don&#8217;t like phone calls. Including, but not limited to, millenials.</p>\n<h3>Workflow 5: SMS -> TTS</h3>\n<p>Send a PIN code by text message, follow up with a voice call if the code hasn&#8217;t been verified. Offering both text and speech but with only one attempt at each one includes lots of people without being too intrusive.</p>\n<h2>Make the Most of Your Reach</h2>\n<p>Adjusting your application to make use of the best workflow for your use case (or even using different options for different customers) can really improve the verification rates of your customers.</p>\n<p>We&#8217;re super excited to have this feature publicly available &#8211; let us know how you changed your workflows and why! You can always find us on Twitter <a href=\"https://twitter.com/NexmoDev\">@NexmoDev</a>, email us <a href=\"mailto:devrel@nexmo.com\">devrel@nexmo.com</a> or ask a question in the <code>#verify-api</code> channel on the <a href=\"https://developer.nexmo.com/community/slack\">Nexmo Community Slack</a>.</p>\n"}