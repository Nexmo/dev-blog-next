{"_filedata":{"slug":"forward-call-via-voice-proxy-node-red-dr"},"title":"Forward a Call via a Voice Proxy with Node-RED","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2019/10/forward-call-featured.png","author":256,"published":true,"published_at":"2019-10-17T08:09:37","tags":[679,1631,1632,1168,1630,1629,1634,1633],"body":"<p>In this tutorial we&#8217;ll be using the Nexmo Voice API to make private calls, by forwarding a call via a voice proxy, and as an additional bonus we&#8217;re also going to add a recording feature to it at the end.</p>\n<p>If you&#8217;ve ever wondered how you can contact your ride share driver, Airbnb host or courier without knowing their number, or you&#8217;re simply interested in making private calls, follow along and find out how this is done!</p>\n<h2>Dependencies</h2>\n<h3>Prerequisites</h3>\n<p>Before getting started, you’ll need a few things:</p>\n<ul>\n<li><a href=\"https://nodejs.org/en/\">Node.js</a> and <a href=\"https://nodered.org/docs/getting-started/installation\">Node-RED</a> installed, if you&#8217;re developing locally</li>\n<li>A Nexmo account — <a href=\"https://dashboard.nexmo.com/sign-up\">create one for free</a> if you haven&#8217;t already</li>\n<li>A way to expose your server to the internet. This either means you&#8217;re running a hosted version of Node-RED, or using a tunnelling service like <a href=\"https://flows.nodered.org/node/node-red-contrib-ngrok\">ngrok</a> &#8211; get up to speed with this <a href=\"https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/\">Getting Started with Ngrok in Node-RED</a> tutorial</li>\n</ul>\n<h3>Getting Your Credentials</h3>\n<p>To use the Nexmo nodes in Node-RED you&#8217;ll have to provide your credentials, so it&#8217;s best to keep them handy. Go to your <a href=\"https://dashboard.nexmo.com\">dashboard</a> to find your API key and secret and make a note of them.</p>\n<p>Next, you&#8217;ll need a <em>Voice-enabled</em> virtual number. Go to Numbers > <a href=\"https://dashboard.nexmo.com/buy-numbers\">Buy numbers</a> to get one.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/04/buy-number-nexmo-dashboard.gif\" alt=\"\" width=\"100%\" height=\"100%\" class=\"alignnone gif-player size-full wp-image-28897\" /></p>\n<h3>Setting Up Your Node-RED Editor</h3>\n<p>Access your Node-RED editor by pointing your browser at <a href=\"http://localhost:1880\">http://localhost:1880</a>.</p>\n<p>Once you have the editor open, you&#8217;ll need to install the Nexmo nodes. You can do so under the <em>Manage palette</em> menu, by searching for the <code>node-red-contrib-nexmo</code> package and clicking install.</p>\n<p>Now you should see all of the Nexmo nodes appear on the left side of your screen &#8211; in your node palette, among other default nodes.</p>\n<h2>Expose Your Local Server to the Internet</h2>\n<p>In case you&#8217;re not using a hosted version of Node-RED, the Nexmo Voice API will need another way to access your webhook endpoints, so let&#8217;s <a href=\"https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/\">make your local server accessible over the public internet</a>. If you’re running Node-RED on a public web server instead of your local machine, you&#8217;re all set and ready to move on to the <a href=\"link_me\"><em>Create a Nexmo Voice Application</em></a> step.</p>\n<p>A convenient way to do this is by using a tunneling service like <a href=\"https://ngrok.com\">ngrok</a>, and there is a <a href=\"https://flows.nodered.org/node/node-red-contrib-ngrok\">node</a> for it that you can install directly from your editor.</p>\n<p>Feel free to also check out our tutorial on <a href=\"https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/\">Getting Started with Ngrok in Node-RED</a> to find out more.</p>\n<p>Once you&#8217;ve installed the ngrok node and restarted your editor, the <strong><code>ngrok</code></strong> node should appear in you node palette. It takes the strings <strong>on</strong> or <strong>off</strong> as input to start/stop the tunnel, and outputs the ngrok host address as the <em>msg.payload</em>.</p>\n<p><em>Import</em> from <em>Clipboard</em> the snippet below, or have a stab at building this path yourself.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd55eb25371547489\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\n[\n    {\n        \"id\": \"faed0f7.1e524f\",\n        \"type\": \"inject\",\n        \"z\": \"5b8bbfc3.1a9f18\",\n        \"name\": \"\",\n        \"topic\": \"\",\n        \"payload\": \"on\",\n        \"payloadType\": \"str\",\n        \"repeat\": \"\",\n        \"crontab\": \"\",\n        \"once\": false,\n        \"onceDelay\": 0.1,\n        \"x\": 190,\n        \"y\": 100,\n        \"wires\": [\n            [\n                \"8a01baeb.6756d\"\n            ]\n        ]\n    },\n    {\n        \"id\": \"11051fa9.75bd1\",\n        \"type\": \"inject\",\n        \"z\": \"5b8bbfc3.1a9f18\",\n        \"name\": \"\",\n        \"topic\": \"\",\n        \"payload\": \"off\",\n        \"payloadType\": \"str\",\n        \"repeat\": \"\",\n        \"crontab\": \"\",\n        \"once\": false,\n        \"onceDelay\": 0.1,\n        \"x\": 190,\n        \"y\": 160,\n        \"wires\": [\n            [\n                \"8a01baeb.6756d\"\n            ]\n        ]\n    },\n    {\n        \"id\": \"8a01baeb.6756d\",\n        \"type\": \"ngrok\",\n        \"z\": \"5b8bbfc3.1a9f18\",\n        \"port\": \"1880\",\n        \"creds\": \"5a9e2b8c.173a2c\",\n        \"region\": \"ap\",\n        \"subdomain\": \"\",\n        \"name\": \"\",\n        \"x\": 400,\n        \"y\": 140,\n        \"wires\": [\n            [\n                \"93fd5675.743c1\"\n            ]\n        ]\n    },\n    {\n        \"id\": \"93fd5675.743c1\",\n        \"type\": \"debug\",\n        \"z\": \"5b8bbfc3.1a9f18\",\n        \"name\": \"\",\n        \"active\": true,\n        \"tosidebar\": true,\n        \"console\": false,\n        \"tostatus\": false,\n        \"complete\": \"false\",\n        \"x\": 620,\n        \"y\": 140,\n        \"wires\": []\n    },\n    {\n        \"id\": \"5a9e2b8c.173a2c\",\n        \"type\": \"ngrokauth\",\n        \"z\": \"\"\n    }\n]\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd55eb25371547489-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd55eb25371547489-79\">79</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-1\"><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"faed0f7.1e524f\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"inject\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payload\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"on\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payloadType\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"str\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"repeat\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"crontab\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"once\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"onceDelay\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">190</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"8a01baeb.6756d\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"11051fa9.75bd1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"inject\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payload\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"off\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"payloadType\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"str\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"repeat\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"crontab\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"once\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"onceDelay\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">190</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">160</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"8a01baeb.6756d\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-41\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-42\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"8a01baeb.6756d\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ngrok\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-46\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"port\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1880\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-47\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"creds\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5a9e2b8c.173a2c\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-48\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"region\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ap\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-49\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"subdomain\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-50\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-51\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-52\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-53\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-54\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-55\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"93fd5675.743c1\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-56\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-57\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-58\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-59\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-60\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"93fd5675.743c1\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-61\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"debug\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-62\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5b8bbfc3.1a9f18\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-63\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"name\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-64\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"active\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-65\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"tosidebar\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-66\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"console\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-67\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"tostatus\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-68\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"complete\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"false\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-69\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"x\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">620</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-70\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"y\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-71\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"wires\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-72\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-73\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-74\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"5a9e2b8c.173a2c\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-75\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"type\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ngrokauth\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-76\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"z\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-77\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd55eb25371547489-78\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd55eb25371547489-79\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<p>At this point, your editor should look similar to this:</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/ngrok-path.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30520\" /></p>\n<p>As the last step before hitting <strong>Deploy</strong>, open up the <strong><code>ngrok</code></strong> node properties and specify the port number (<code>1880</code> for Node-RED) and the Region.</p>\n<p>You can also add your authtoken for your ngrok account if you have one. Don&#8217;t worry if you don&#8217;t, just skip this step for now. The node will warn that it is not fully configured but this is not an issue.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/ngrok-properties.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30521\" /></p>\n<p>Hit <strong>Deploy</strong> and click on the <strong>on</strong> <strong><code>inject</code></strong> node&#8217;s button, then navigate to the URL displayed in the debug area (YOUR_URL for future reference) to find your Node-RED editor at a public address.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/ngrok-nodered-1.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30519\" /></p>\n<h2>Create a Nexmo Voice Application</h2>\n<p>Some of Nexmo’s APIs, including the Voice API, use Nexmo Applications to hold security and config information needed to connect to Nexmo endpoints.</p>\n<p>In the Nexmo Node-RED palette, several nodes have the capability to create these applications: <strong><code>getrecording</code></strong>, <strong><code>earmuff</code></strong>, <strong><code>mute</code></strong>, <strong><code>hangup</code></strong>, <strong><code>transfer</code></strong>, <strong><code>createcall</code></strong>, <strong><code>playaudio</code></strong>, <strong><code>playtts</code></strong> and <strong><code>playdtmf</code></strong>.</p>\n<p>Drag any of these nodes into your workspace, then double-click on it to open up the node properties.</p>\n<p>Next to the <code>Nexmo Credentials</code>, select &#8220;Add new nexmovoiceapp&#8230;&#8221; from the drop-down menu and click the edit button. Fill in the details below and click <em>Create New Application</em>.</p>\n<table>\n<thead>\n<tr>\n<th>KEY</th>\n<th>DESCRIPTION</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>Name</code></td>\n<td>Choose a name for your Voice Application, for example &#8220;Nexmo Voice Application&#8221;.</td>\n</tr>\n<tr>\n<td><code>API Key</code></td>\n<td>Your Nexmo API key, shown in your <a href=\"https://dashboard.nexmo.com/getting-started-guide\">account overview</a>.</td>\n</tr>\n<tr>\n<td><code>API Secret</code></td>\n<td>Your Nexmo API secret, shown in your <a href=\"https://dashboard.nexmo.com/getting-started-guide\">account overview</a>.</td>\n</tr>\n<tr>\n<td><code>Answer URL</code></td>\n<td>YOUR_URL/answer, you&#8217;ll be hosting a Nexmo Call Control Object (NCCO) here. &#8211; more about this later on.</td>\n</tr>\n<tr>\n<td><code>Event URL</code></td>\n<td>YOUR_URL/event, you&#8217;ll need to reference this when setting up the event handler.</td>\n</tr>\n</tbody>\n</table>\n<p>Node-RED will then create a new Nexmo Application on your account and fill in the App ID and Private Key fields. After this step, feel free to delete the Nexmo node you used, as a <code>nexmovoiceapp</code> config node has been created, and that contains all the Nexmo credentials this flow needs.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/create-voiceapp.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30507\" /></p>\n<h2>Set Up a Number to Call</h2>\n<p>Next, you&#8217;ll have to link your virtual number to this application.</p>\n<p>Find the Voice Application you&#8217;ve just created in your Nexmo Dashboard by navigating to <em>Voice</em> > <em><a href=\"https://dashboard.nexmo.com/voice/your-applications\">Your Applications</a></em>.</p>\n<p>Click on the name of this application, then under the <em>Numbers</em> tab click on the <strong>Link</strong> button next to the virtual number you&#8217;ve rented earlier.</p>\n<p>In case the number you&#8217;d like to use is already linked to another app, click on <strong>Manage number</strong> and configure it to forward incoming calls to your app.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/link-number.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30518\" /></p>\n<p><em>Bonus tip:</em> Use a <strong><code>comment</code></strong> node to take note of the Nexmo number linked to your application, this way you always have it handy.</p>\n<h2>Handle Inbound Calls</h2>\n<p>When you receive an inbound call, the Nexmo Voice API makes a <code>GET</code> request to an endpoint you define, <code>YOUR_URL/answer</code>, and expects a set of instructions on how to handle the call.</p>\n<p>These instructions come in the form of a <em>Nexmo Call Control Object</em>, also known as NCCOs.<br />\nThere are lots of different actions available, find the corresponding nodes under the Nexmo palette in your Node-RED editor or check out the <a href=\"https://developer.nexmo.com/api/voice/ncco\">NCCO Reference</a> to find out more about them.</p>\n<p>For this tutorial we&#8217;ll be using the <code>connect</code> action, so that when the inbound call is received, it gets connected to a new phone number we specify.</p>\n<h3>Define the Webhook Endpoint for Inbound Calls</h3>\n<p>Add a <em><code>voice webhook</code></em> and a <em><code>return ncco</code></em> node to your workspace, and wire them together to define a webhook endpoint.</p>\n<p>Next, open up the <em><code>voice webhook</code></em> node properties, select <code>GET</code> as a <code>Method</code> and type <code>/answer</code> in the <code>URL</code> field, then press <em>Deploy</em>.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/inbound-webhook.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30517\" /></p>\n<p>Great! Now you have a webhook that returns an NCCO to Nexmo&#8217;s API. At this point it doesn&#8217;t contain any actions, so let&#8217;s add one!</p>\n<h3>Build the Nexmo Call Control Object</h3>\n<p>To forward the incoming call, we need to connect it to a new endpoint. To do so, we need a <code>connect</code> action.</p>\n<p>Add a <em><code>connect</code></em> node in between the <em><code>voice webhook</code></em> and a <em><code>return ncco</code></em> nodes. This will add a connect action to the NCCO.</p>\n<p>Open up the <em><code>connect</code></em> node editor, select <code>Phone</code> as an <code>Endpoint</code>and type in the number you&#8217;d lilke to call in the <code>Number {}</code> field.</p>\n<p>Leave the <code>From {}</code> field empty for the Caller ID to appear as unknown, or fill it in with one of your Nexmo virtual numbers.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-connect-node.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30510\" /></p>\n<p>To find out more about the other parameters and the <code>connect</code> action, check out the <a href=\"https://developer.nexmo.com/voice/voice-api/ncco-reference#connect\">NCCO Reference</a>.</p>\n<h2>Log Call Events</h2>\n<p>Finally, connect an <code>http in</code> node to an <code>http response</code> node, as well as to a <code>debug</code> node, so that you can view your call events in the debug area.</p>\n<p>In the <code>http</code> input node, select <code>POST</code> as a <code>Method</code> and fill in the <code>URL</code> field with <code>/event</code>.</p>\n<p>The <code>http response</code> node should have <code>200</code> set as <code>Status code</code>, but don&#8217;t worry about it, this is the default value as well.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-flow.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30512\" /></p>\n<p>Now call your Nexmo number and follow your call events in the debug sidebar!</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-call-events_.gif\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full gif-player wp-image-30508\" /></p>\n<h2>Add a Recording Feature</h2>\n<p>When making business phone calls, it&#8217;s often helpful to have the option to also record them. So let&#8217;s have a look at how we can transform the flow above to give us a recording of the conversation.</p>\n<h3>Update the NCCO</h3>\n<p>First, we&#8217;ll need a <code>record</code> action added to the Nexmo Call Control Object.</p>\n<p>Recording starts when the record action is executed in the NCCO and finishes when the synchronous condition in the action is met. That is, <code>End On Silence</code>, <code>timeOut</code> or <code>endOnKey</code>.</p>\n<p>If you do not set a synchronous condition, the Voice API immediately executes the next NCCO without recording.</p>\n<p>In our use case, this means that we need to add a <em><code>record</code></em> node before the <em><code>connect</code></em> node, and no <code>End On Silence</code>, <code>Time Out</code> or <code>End On Key</code> values should be set.</p>\n<p>Go ahead and add a <em><code>record</code></em> node to your flow, between the <em><code>voice webhook</code></em> and <em><code>connect</code></em> nodes.</p>\n<p>Open up its properties, fill in the <code>URL {}</code> field with something like <code>YOUR_URL/record</code>, select <code>POST</code> as a <code>Method</code> and pick a <code>Format</code> for the recording file &#8211; I&#8217;ll go with <code>MP3</code>.  You could also tick <code>Beep Start</code> to have a clear indication of when exactly the recording starts.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-record-node.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30515\" /></p>\n<h3>Add Handler for the Recording eventURL</h3>\n<p>Next, we need to add a handler for the recording eventURL &#8211; <code>YOUR_URL/record</code>.<br />\nThis way we receive the event on completion of recording, and then be able to download said recording to our machine.</p>\n<p>Add an <code>http in</code> node and an <code>http response</code> node to your workspace and wire them together. Consider also adding a <code>debug</code> node to see what&#8217;s coming through the recording eventURL.<br />\nIn the <code>http</code> input node, select <code>POST</code> as a <code>Method</code> and fill in the <code>URL</code> field with <code>/record</code>.</p>\n<p>The <code>http response</code> node should have <code>200</code> set as <code>Status code</code>, but this is the default value as well.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-record-event.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30514\" /></p>\n<h3>Download Recording</h3>\n<p>Once the recording has completed, Nexmo sends us the recording URL in the recording event webhook . The last step is fetching the recording and downloading it.</p>\n<p>For this step we&#8217;ll need a <em><code>getrecording</code></em> node to fetch the recording audio from the supplied URL, and a <em><code>file</code></em> node to write it to a file on our machine.</p>\n<p>Add a <em><code>getrecording</code></em> node after the <code>/record</code> <em><code>http in</code></em> node, then in its node properties select the voice application created earlier from the <code>Nexmo Credentials</code> drop-down and provide an absolute path as <code>Filename {}</code>.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-getrecording.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30513\" /></p>\n<p>And finally, add a <em><code>file</code></em> node after <em><code>getrecording</code></em>. In its node editor, make sure the <em>Create directory if it doesn&#8217;t exist?</em> option is ticked and select either <em>overwrite</em> or <em>append to file</em> from the <code>Action</code> drop-down. Leave the <code>Filename</code> field empty, as this value will be passed in from the <em><code>getrecording</code></em> node, in <code>{{msg.filename}}</code>.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-file-node.png\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full wp-image-30511\" /></p>\n<p>That&#8217;s a wrap! Get a second device or have a friend call your Nexmo number, have a conversation and once you&#8217;re done, the recording file will be waiting for you, already domnloaded to your machine. Enjoy!</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2019/10/forward-recording-download_.gif\" alt=\"\" width=\"\" height=\"\" class=\"alignnone size-full gif-player wp-image-30516\" /></p>\n<h2>Where Next?</h2>\n<h3>Further Reading</h3>\n<ul>\n<li><a href=\"https://developer.nexmo.com/voice/voice-api/overview\">Voice API Reference</a></li>\n<li><a href=\"https://developer.nexmo.com/voice/voice-api/ncco-reference#record\">Record NCCO Reference</a></li>\n<li><a href=\"https://developer.nexmo.com/voice/voice-api/ncco-reference#connect\">Connect NCCO Reference</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/07/03/ngrok-in-node-red-dr/\">Get Started with ngrok in Node-RED</a></li>\n</ul>\n<h3>Try Another Tutorial</h3>\n<ul>\n<li><a href=\"https://www.nexmo.com/blog/2019/10/07/conference-call-node-red-dr\">Build a Conference Call with Node-RED</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/09/25/verify-phone-numbers-with-node-red-dr\">Verify Phone Numbers with Node-RED</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/07/15/stream-audio-node-red-dr\">How to Stream Audio into a Call with Node-RED</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/06/14/make-text-to-speech-phone-calls-node-red-dr/\">How to Make Text-to-Speech Phone Calls with Node-RED</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/05/09/receive-phone-calls-node-red-dr/\">How to Receive Phone Calls with Node-RED</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/04/17/send-sms-messages-node-red-dr/\">How to Send SMS Messages with Node-RED</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/04/24/receive-sms-messages-node-red-dr/\">How to Receive SMS Messages with Node-RED</a></li>\n</ul>\n<p><script>\nwindow.addEventListener('DOMContentLoaded', (event) => {\n    document.querySelectorAll(\".gif-player\").forEach(image => {\n        image.src = image.src.replace(/\\.gif$/g, \".png\")\n        image.addEventListener(\"click\", (event) => {\n            if (event.target.src.indexOf(\".gif\") > 0) {\n                image.src = image.src.replace(/\\.gif$/g, \".png\")\n            } else {\n                image.src = image.src.replace(/\\.png$/g, \".gif\")\n            }\n        })\n    })\n});\n</script></p>\n<style>\n.gif-player {\n  cursor: pointer;\n}\nimg.alignnone {\n  border-width: 0px !important;\n}\n.crayon-syntax {\n  height: 400px !important;\n  overflow: scroll !important;\n}\n</style>\n"}