{"_filedata":{"slug":"nightscout-notification-nexmo-dr"},"title":"How to Build a Nexmo Notifier with Nexmo Messages and Python &#8211; Part One","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/02/E_Nightscout-Notifier_1200x600-1.png","author":364,"published":true,"published_at":"2020-02-24T18:09:04","tags":[1111,1684,1543,1685,1333,1683,410],"body":"[![blog spotlight banner ](https://www.nexmo.com/wp-content/uploads/2019/08/blog-spotlight-banner.png)](https://developer.nexmo.com/spotlight)\n\nIn this tutorial, we’ll be building **Scout**, an application created using [Python](https://www.python.org/) with [Flask](https://palletsprojects.com/p/flask/). On the client side, we’ll use JavaScript for certain dynamic functionalities required for our app. This tutorial is split into two parts—in the first, we’ll set up Google auth, build a user interface, and implement a Firebase Firestore.\n\nThe final version of the code can be found [here](https://github.com/alphacentauri82/nexmo-scout), if you’re curious to see it all put together!\n\n## Services Involved\n\nScout relies on four services for its operation:\n\n*   **[Nightscout](https://nightscout.info)**, an open-source project that supports cloud access to data from a variety of CGM (continuous glucose monitoring) devices.\n\n[![nightscout](https://www.nexmo.com/wp-content/uploads/2020/02/nightscout1.png)](https://www.nexmo.com/wp-content/uploads/2020/02/nightscout1.png)\n\n*   **[Nexmo](https://dashboard.nexmo.com/sign-up?utm_source=DEV_REL&utm_medium=github&utm_campaign=https://github.com/alphacentauri82/nexmo-scout)** for sending and receiving SMS messages.\n    \n*   **[Google auth](https://developers.google.com/identity/protocols/OAuth2):** The API that allows us to use the Google authentication service for our web application.\n    \n*   **[Firebase/Firestore](https://firebase.google.com/docs/firestore)**, to store our data in the cloud.\n    \n\n## Application Features\n\nScout allows us to ping the Nightscout data of a user obtaining the last blood glucose level recorded. If levels are below 70mg/dL(3.9 mmol/L) or above 240mg/dL(13.3 mmol/L), the application will execute a call to the user’s mobile phone number, and the user will hear their current blood glucose level. If the user does not respond, a text message will be sent to the user’s preferred emergency contact and up to 5 additional numbers.\n\nThe ping frequency to Nightscout is set to one minute. To be exact, it will be done 30 seconds after each minute using the system clock. If a user’s glucose level remains out of the standard range during that time, the call will be made again.\n\nIf the Nightscout service does not respond for 1 hour, an SMS will be sent alerting the user that their service is offline.\n\nThe user can sign up/login using their Google account and configure the following information:\n\n*   Nightscout API URL\n*   Personal number\n*   Preferred emergency contact and up to 5 additional phone numbers\n\n[![dashboard of the app ](https://www.nexmo.com/wp-content/uploads/2020/02/dashboard1.png)](https://www.nexmo.com/wp-content/uploads/2020/02/dashboard1.png)\n\n## Application Structure\n\nOur application can be divided into two parts:\n\n*   A Flask app that allows the user to log in and configure the application data\n*   A Python Thread with a scheduler that runs with a given frequency, consulting the Nightscout dashboard of each user and sending alerts when necessary. A second scheduler that runs less frequently can be assigned to obtain fresh data.\n\n## Prerequisites\n\n*   Python 3.x.x\n    \n*   An application directory:\n    \n    <textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">mkdir Scout cd Scout</textarea>\n    \n    <table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc2ff905267900-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc2ff905267900-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc2ff905267900-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc2ff905267900-1\"><span class=\"crayon-e\">mkdir </span><span class=\"crayon-e\">Scout</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc2ff905267900-2\"><span class=\"crayon-e\">cd </span><span class=\"crayon-i\">Scout</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc2ff905267900-3\">&nbsp;</div></div></td></tr></tbody></table>\n    \n*   Flask:\n    \n    <textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">pip install Flask</textarea>\n    \n    <table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc307289626622-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc307289626622-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc307289626622-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">Flask</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc307289626622-2\">&nbsp;</div></div></td></tr></tbody></table>\n    \n*   `dotenv`,`requests`, and `google-auth` Python libraries:\n    \n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">pip install requests python-dotenv google-auth`</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc308936628863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc308936628863-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc308936628863-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">requests </span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dotenv </span><span class=\"crayon-v\">google</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc308936628863-2\">&nbsp;</div></div></td></tr></tbody></table>\n\n*   A unique key to store our session variables. It’s a binary that we have to handle discreetly. Generate with the following:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">python -c 'import os; print (os.urandom (16)) '`</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30a478447430-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc30a478447430-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30a478447430-1\"><span class=\"crayon-v\">python</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'import os; print (os.urandom (16)) '</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc30a478447430-2\">&nbsp;</div></div></td></tr></tbody></table>\n\n## User Interface Development and Google Auth\n\nIn this section, we will start configuring Google auth. We will also create a simple interface for calling the Google auth API, a login view, and a persistent server-side session to keep us logged in until the user decides to log out.\n\n### Google Auth\n\nTo use Google auth, we have to obtain a `client ID`, which we will use to call the Google API sign in. Head to the [Google Cloud dashboard](https://console.cloud.google.com/home/dashboard), and create a new project.\n\n*   Once the project has been created, click on the navigation menu `(≡)` and select _APIs & Services> Credentials_.\n*   Click on _Create Credentials> OAuth client ID_.\n*   Select _Web_.\n*   In _Authorized JavaScript sources_ and _Authorized redirection URIs_ write the domain name to be used for this app, e.g. `https://domain.ext/`. In our case we will assume that `/` will be the endpoint that will consume our authentication service.\n*   Click on _Create_ and our client ID will be generated. It should be listed on _OAuth 2.0 client IDs_. Keep the client ID at hand, as we will use it later.\n\n### Diving into the Source Code\n\nOnce we are done with all our preparations, let’s open our favorite editor (for example, pyCharm or Visual Studio Code). Create a new file. You can name it whatever you want, in my case I chose `notifier.py`.\n\nAt the very beginning of the file we will import the following modules:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">import json, os from flask import Flask, request, render_template, session</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30b219402329-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc30b219402329-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30b219402329-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30b219402329-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">json</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">os</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc30b219402329-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">flask </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">Flask</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">render_template</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">session</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30b219402329-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn the same way, we import some functions that will allow us to read the environment variables. A secure way to handle credentials is to make them available only in the scope of the operating system that runs the application.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">from os.path import join, dirname from dotenv import load_dotenv</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30c452308735-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc30c452308735-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30c452308735-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30c452308735-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">join</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dirname</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc30c452308735-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">dotenv </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">load</span><span class=\"crayon-sy\">_</span>dotenv</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30c452308735-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nLet’s include the modules for Google auth that will allow us to reconfirm the identity of the user from the backend. This will allow us to create a persistent session if the identity is valid.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">from google.oauth2 import id_token import google.auth.transport.requests</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30d665558648-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc30d665558648-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30d665558648-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30d665558648-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">oauth2 </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">id_token</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc30d665558648-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">transport</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">requests</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30d665558648-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nAnd the requests module that allows us to request using the POST or GET methods. It’s similar to Axios.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">import requests</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30e873312187-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc30e873312187-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30e873312187-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-i\">requests</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc30e873312187-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nCreate a new file and name it `.env` (In the tutorial repo I named it `.example-env`. If using my repo, make sure you rename it!) Add the following lines:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">GOOGLE_CLIENT_ID=\"YOUR_GOOGLE_AUTH_CLIENT_ID\" SITE_URL=\"YOUR_SITE_URL\"</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30f287928725-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc30f287928725-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc30f287928725-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30f287928725-1\"><span class=\"crayon-v\">GOOGLE_CLIENT_ID</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"YOUR_GOOGLE_AUTH_CLIENT_ID\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc30f287928725-2\"><span class=\"crayon-v\">SITE_URL</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"YOUR_SITE_URL\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc30f287928725-3\">&nbsp;</div></div></td></tr></tbody></table>\n\n**Note:** Replace`YOUR_GOOGLE_AUTH_CLIENT_ID` with the `clientID` generated by google, and `YOUR_SITE_URL` with the domain name you registered previously (`https://domain.ext`). Save the file!\n\n* * *\n\nLet’s go back to `notifier.py` and add the following lines:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">app = Flask(__name__) app.secret_key = [THE KEY YOU PREVIOUSLY GENERATED]</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc311692377062-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc311692377062-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc311692377062-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc311692377062-1\"><span class=\"crayon-v\">app</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Flask</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__name__</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc311692377062-2\"><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">secret_key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">THE </span><span class=\"crayon-e\">KEY </span><span class=\"crayon-e\">YOU </span><span class=\"crayon-e\">PREVIOUSLY </span><span class=\"crayon-v\">GENERATED</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc311692377062-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nWe assigned the variable `app` to represent. our Flask application.`app` will create its own context to make only operations related to the requests made to the Flask application\n\nThen we assign the secret\\_key attribute. Paste the value previously generated with `python -c 'import os; print(os.urandom(16))'`.\n\nTo access the environment variables defined in the `.env` file, we add the following:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">envpath = join(dirname(__file__),\"./.env\") load_dotenv(envpath)</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc313415770394-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc313415770394-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc313415770394-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc313415770394-1\"><span class=\"crayon-v\">envpath</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">dirname</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__file__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"./.env\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc313415770394-2\"><span class=\"crayon-e\">load_dotenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">envpath</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc313415770394-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nNow, let’s define the `get_session` function that evaluates whether there is a specific key within the session variable, returning `None` in case it doesn’t exist, and the value of the key otherwise. It can be reused in different sections of the program:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">def get_session(key): value = None if key in session: value = session[key] return value</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc314356320465-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc314356320465-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc314356320465-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc314356320465-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc314356320465-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc314356320465-6\">6</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc314356320465-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc314356320465-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">None</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc314356320465-3\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">session</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc314356320465-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc314356320465-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc314356320465-6\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn the following section we begin to define our Flask application with the controller for the endpoint `/`, which will be our landing page and will show us the Google login button:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">@app.route('/',methods=['GET','POST']) def home(): if get_session(\"user\") != None: return render_template(\"home.html\", user = get_session(\"user\")) else: return render_template(\"login.html\", client_id=os.getenv(\"GOOGLE_CLIENT_ID\"), site_url=os.getenv(\"SITE_URL\"))</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc316527445721-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc316527445721-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc316527445721-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc316527445721-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc316527445721-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc316527445721-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc316527445721-7\">7</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc316527445721-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'GET'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc316527445721-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">home</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc316527445721-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc316527445721-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">render_template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"home.html\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc316527445721-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc316527445721-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">render_template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"login.html\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client_id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"GOOGLE_CLIENT_ID\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">site_url</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SITE_URL\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc316527445721-7\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe line `@app.route('/,methods=['GET','POST'])` indicates that every request, either `GET` or `POST`, will be directed to the `home()` handler. The `home` function evaluates whether the user session exists, then loads the `home.html` template if the user is authenticated. If the user is not authenticated, we load the `login.html` template, where the Google authentication interface will be displayed (we pass the value of `GOOGLE_CLIENT_ID` and `SITE_URL` previously defined in our `.env` file. The second parameter will be used for redirection).\n\nFollowing the workflow, when the user first enters the site the user session variable will not exist, therefore `login.html` will be loaded. The next logical step would be to develop the `home.html` jinja template. But before doing that we need to do the following:\n\n*   Create a new `static` directory within your main application directory:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">mkdir static</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc317322873111-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc317322873111-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc317322873111-1\"><span class=\"crayon-e\">mkdir </span><span class=\"crayon-m\">static</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc317322873111-2\">&nbsp;</div></div></td></tr></tbody></table>\n\n*   Download [Materialize](https://materializecss.com/getting-started.html), a framework for front-end development based on material design. Unzip the file and move the `css` and`js` directories into the previously created `static` directory. Ideally, keep only the minified versions of the `css` and `js` files.\n    \n*   Download the [Materialize icons](https://fonts.googleapis.com/icon?family=Material+Icons). Once downloaded, create a new `fonts` directory within `static`, and move the font file there.\n    \n*   Create `style.css` in the `static/css/` directory. Usually Materialize is more than enough to style an app, but sometimes an additional style file is necessary to control certain details not covered by Materialize. Let’s add some extra style:\n    \n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">@font-face { font-family: 'Material Icons'; font-style: normal; font-weight: 400; src: url(/static/fonts/google-icons.woff2) format('woff2'); } .material-icons { font-family: 'Material Icons'; font-weight: normal; font-style: normal; font-size: 24px; line-height: 1; letter-spacing: normal; text-transform: none; display: inline-block; white-space: nowrap; word-wrap: normal; direction: ltr; -moz-font-feature-settings: 'liga'; -moz-osx-font-smoothing: grayscale; } .logo { font-size: 30px !important; padding-top: 5px; } div.g-signin2 { margin-top: 10px; } div.g-signin2 div { margin: auto; } div#user { margin-top: 10px; margin-bottom: 10px; } div#user.guest { text-align: center; font-size: 20px; font-weight: bold; } div#user.logged { text-align: right; } div#user.logged a { margin-left: 10px; } body { display: flex; min-height: 100vh; flex-direction: column; } main { flex: 1 0 auto; } div.add_contact { height: 20px; } div.add-contacts-container { padding-bottom: 40px !important; } .input-field .sufix { right: 0; } i.delete { cursor: pointer; }</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc318137498244-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc318137498244-71\">71</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">face</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">family</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Material Icons'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">style</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">normal</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weight</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">url</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-m\">static</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fonts</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">google</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">icons</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">woff2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'woff2'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-7\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-8\"><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">material</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">icons</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-9\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">family</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Material Icons'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weight</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">normal</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">style</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">normal</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">line</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-14\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">letter</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">spacing</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">normal</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">transform</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">none</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inline</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-17\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">white</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">space</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nowrap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-18\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">word</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">wrap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">normal</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-19\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">direction</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ltr</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-20\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">moz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">feature</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">settings</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'liga'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-21\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">moz</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">osx</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grayscale</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-22\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-23\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-24\"><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">logo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-25\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-26\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">top</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-27\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-28\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-29\"><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">signin2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-30\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">top</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-31\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-32\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-33\"><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">signin2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">div</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-34\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-35\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-36\"><span class=\"crayon-e\">div</span><span class=\"crayon-p\">#user {</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-37\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">top</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-38\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bottom</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-39\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-40\"><span class=\"crayon-v\">div</span><span class=\"crayon-p\">#user.guest {</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-41\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">align</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">center</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-42\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-43\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">weight</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bold</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-44\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-45\"><span class=\"crayon-v\">div</span><span class=\"crayon-p\">#user.logged {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-46\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">align</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-47\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-48\"><span class=\"crayon-v\">div</span><span class=\"crayon-p\">#user.logged a {</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-49\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">left</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-50\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-51\"><span class=\"crayon-e\">body</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-52\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flex</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-53\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100vh</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-54\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">flex</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">direction</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">column</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-55\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-56\"><span class=\"crayon-e\">main</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-57\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">flex</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-58\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-59\"><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>contact<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-60\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-61\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-62\"><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">add</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">contacts</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-63\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bottom</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-64\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-65\"><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">input</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">field</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sufix</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-66\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">right</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-67\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-68\"><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">delete</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-69\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">cursor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pointer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc318137498244-70\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc318137498244-71\">&nbsp;</div></div></td></tr></tbody></table>\n\nNow, we are ready to create our app’s layout. We start by creating a parent template that defines blocks of content that are used by other child files. Officially, this will be our first jinja template 🎉. In order for this file to be recognized by Flask as a template, let’s create a `templates` directory inside `static`, and create `layout.html`. Let’s add the following code:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">&lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt; &lt;head&gt; &lt;link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/materialize.min.css') }}\" /&gt; &lt;link rel=\"stylesheet\" href=\"{{ url_for('static', filename='css/style.css') }}\" /&gt; {% block head %}{% endblock %} &lt;/head&gt; &lt;body&gt; &lt;header class=\"container-fluid\"&gt; &lt;nav class=\"teal\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col\"&gt; &lt;a href=\"#\" class=\"brand-logo\" &gt;&lt;i class=\"material-icons logo\"&gt;record_voice_over&lt;/i&gt; Scout = Nexmo + Nightscout&lt;/a &gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/nav&gt; &lt;/header&gt; &lt;main class=\"container\"&gt; {% block content %}{% endblock %} &lt;/main&gt; &lt;footer class=\"page-footer teal\"&gt; &lt;div class=\"footer-copyright\"&gt; &lt;div class=\"container\"&gt; &lt;!--This is the hashtag used by the nightscout project :) --&gt; Scout &lt;a class=\"brown-text text-lighten-3\"&gt;#WeAreNotWaiting&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;/footer&gt; &lt;script language=\"javascript\" src=\"{{ url_for('static', filename='js/materialize.min.js') }}\" &gt;&lt;/script&gt; {% block script %}{% endblock %} &lt;/body&gt; &lt;/html&gt;</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31a169708357-47\">47</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">DOCTYPE </span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">html </span><span class=\"crayon-v\">lang</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"en\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">link</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-5\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"stylesheet\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ url_for('static', filename='css/materialize.min.css') }}\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">link</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-9\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"stylesheet\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ url_for('static', filename='css/style.css') }}\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-14\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">header </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"container-fluid\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">nav </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"teal\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"container\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"#\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"brand-logo\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"material-icons logo\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">record_voice_over</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Scout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Nexmo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nightscout</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nav</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">header</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">main </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"container\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">content</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">main</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">footer </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"page-footer teal\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"footer-copyright\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"container\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">--</span><span class=\"crayon-r\">This</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">hashtag </span><span class=\"crayon-e\">used </span><span class=\"crayon-e\">by </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">nightscout </span><span class=\"crayon-v\">project</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">Scout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"brown-text text-lighten-3\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-p\">#WeAreNotWaiting&lt;/a&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">footer</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-ta\">&lt;script</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-41\"><span class=\"crayon-ta\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e \">language</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"javascript\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-42\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ url_for('static', filename='js/materialize.min.js') }}\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">script</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-45\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31a169708357-46\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31a169708357-47\">&nbsp;</div></div></td></tr></tbody></table>\n\nThere are a couple of interesting details to highlight: **The use of blocks** and **the use of the `url_for` function**. Blocks are reserved sections for inserting code with jinja from child templates. The `url_for` function generates the URLs to the JavaScript and CSS resources in `static`.\n\nThe file structure that we have up to this point should be:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">- static/ - css/ - materialize.min.css - fonts/ - google-icons.woff2 - js/ - materialize.min.js - templates/ - layout.html .env - notifier.py</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31b144593165-12\">12</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31b144593165-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31b144593165-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">css</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31b144593165-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">materialize</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">css</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31b144593165-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fonts</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31b144593165-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">google</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">icons</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">woff2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31b144593165-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">js</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31b144593165-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">materialize</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">js</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31b144593165-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">templates</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31b144593165-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">layout</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31b144593165-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">env</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31b144593165-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">notifier</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31b144593165-12\">&nbsp;</div></div></td></tr></tbody></table>\n\nIf everything looks proper, create `login.html` in the same `templates` directory. This file will be loaded when the `user` session variable does not exist (that is, the user is not logged in).\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">{% extends \"layout.html\" %} {% block head %} &lt;script src=\"https://apis.google.com/js/platform.js\" async defer&gt;&lt;/script&gt; &lt;meta name=\"google-signin-client_id\" content=\"{{ client_id }}\" /&gt; {% endblock %} {% block content %} &lt;div id=\"user\" class=\"guest\"&gt;Welcome guest, You need to authenticate&lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s6 offset-s3\"&gt; &lt;div class=\"card blue-grey darken-1\"&gt; &lt;div class=\"card-content white-text\"&gt; &lt;span class=\"card-title\"&gt;Login To Enter Scout&lt;/span&gt; &lt;p&gt; This application will help you configure alerts to your mobile phone, a preferred emergency contact and up to 5 other contacts. If you have a nightscout dashboard and you have your api available for external queries, You can use this server and when your glucose levels are out of range, you will receive a call to alert you and your preferred contact(s) of such. If you do not answer the call then a sms is sent to your emergency contact(s). &lt;/p&gt; &lt;div class=\"g-signin2\" data-onsuccess=\"onSignIn\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;script language=\"javascript\"&gt; function onSignIn(googleUser) { var profile = googleUser.getBasicProfile() if (profile.getId() !== null &amp;&amp; profile.getId() !== undefined) { var xhr = new XMLHttpRequest() xhr.open('POST', '{{ site_url|safe }}/login') xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded') xhr.onload = function() { console.log('Signed in as: ' + xhr.responseText) //Authenticated so redirect to index window.location = '{{ site_url|safe }}/' } xhr.send( 'idtoken=' + googleUser.getAuthResponse().id_token + '&amp;username=' + profile.getName() + '&amp;email=' + profile.getEmail() ) } } &lt;/script&gt; {% endblock %}</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31d953546352-49\">49</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"layout.html\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">head</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-2\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://apis.google.com/js/platform.js\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">async </span><span class=\"crayon-v\">defer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">meta </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"google-signin-client_id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ client_id }}\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-4\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">content</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"guest\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Welcome </span><span class=\"crayon-v\">guest</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">You </span><span class=\"crayon-e\">need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">authenticate</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-6\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s6 offset-s3\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"card blue-grey darken-1\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"card-content white-text\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">span </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"card-title\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Login </span><span class=\"crayon-st\">To</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Enter </span><span class=\"crayon-v\">Scout</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">span</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">This</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">application </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">help </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">configure </span><span class=\"crayon-e\">alerts </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">mobile </span><span class=\"crayon-v\">phone</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">preferred </span><span class=\"crayon-e\">emergency </span><span class=\"crayon-e\">contact </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">up </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">other </span><span class=\"crayon-v\">contacts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">If</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">you </span><span class=\"crayon-i\">have</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nightscout </span><span class=\"crayon-e\">dashboard </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">have </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">api </span><span class=\"crayon-e\">available </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">external</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-15\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">queries</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">You </span><span class=\"crayon-e\">can </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">when </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">glucose </span><span class=\"crayon-e\">levels </span><span class=\"crayon-e\">are </span><span class=\"crayon-e\">out</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-16\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">range</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">you </span><span class=\"crayon-e\">will </span><span class=\"crayon-i\">receive</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">call </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">alert </span><span class=\"crayon-e\">you </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">preferred</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-17\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">contact</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">such</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">If</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">you </span><span class=\"crayon-st\">do</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">answer </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">call </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sms </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sent</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-18\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">emergency </span><span class=\"crayon-e\">contact</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"g-signin2\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">onsuccess</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"onSignIn\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-23\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-24\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-25\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">language</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"javascript\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-26\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">onSignIn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">googleUser</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">profile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">googleUser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getBasicProfile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">undefined</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xhr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">XMLHttpRequest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{{ site_url|safe }}/login'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setRequestHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Content-Type'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'application/x-www-form-urlencoded'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Signed in as: '</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">responseText</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">//Authenticated so redirect to index</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">location</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{{ site_url|safe }}/'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'idtoken='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">googleUser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getAuthResponse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id_token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'&amp;username='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-41\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-42\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'&amp;email='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getEmail</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-46\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-47\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31d953546352-48\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31d953546352-49\">&nbsp;</div></div></td></tr></tbody></table>\n\nNotice that the first line for `login.html` is `{% extends \"layout.html\"%}`. This indicates that `login.html` inherits from `layout.html`. In other words, it is a child of `layout.html`. This means that the renderer will load `layout.html` with the code variants that we added in `login.html`. These variants are defined within the blocks allowed in layout. Within `login.html` we use the `head` and `content` blocks.\n\nIn the `head` block, we have:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">&lt;script src=\"https://apis.google.com/js/platform.js\" async defer&gt;&lt;/script&gt; &lt;meta name=\"google-signin-client_id\" content=\"{{ client_id }}\" /&gt;</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31e842898064-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31e842898064-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31e842898064-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31e842898064-1\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://apis.google.com/js/platform.js\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">async </span><span class=\"crayon-v\">defer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31e842898064-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">meta </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"google-signin-client_id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ client_id }}\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31e842898064-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe first line indicates that we will be using the Google API for the authentication process and the second is metadata used by Google to know our app’s `clientID`. Note that within the `content` attribute we have written `{{client_id}}`. When the jinja compiler evaluates this expression, it will print the value of the `client_id` variable that we pass to the template using the `render_template` function.\n\nThe next block is `content`, and in there, we present a message to the user indicating how the application works. Then we have a few lines of JavaScript. Basically, it is a function connected to the `onSignIn` event, which is used by Google to return the data of the user that was logged in using Google auth.\n\nWe obtain the user profile with `googleUser.getBasicProfile()`. If there is an ID, the authentication process was successful, and we can proceed to send some data to our server to make an identity reconfirmation with Google and create the session.\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">var xhr = new XMLHttpRequest() xhr.open('POST', '{{ site_url|safe }}/login') xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded') xhr.onload = function() { console.log('Signed in as: ' + xhr.responseText) //Authenticated so redirect to index window.location = '{{ site_url|safe }}/' } xhr.send( 'idtoken=' + googleUser.getAuthResponse().id_token + '&amp;username=' + profile.getName() + '&amp;email=' + profile.getEmail() )</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc31f478974207-17\">17</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xhr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">XMLHttpRequest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-2\"><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{{ site_url|safe }}/login'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-3\"><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setRequestHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Content-Type'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'application/x-www-form-urlencoded'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-4\"><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Signed in as: '</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">responseText</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">//Authenticated so redirect to index</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{{ site_url|safe }}/'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-9\"><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">'idtoken='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">googleUser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getAuthResponse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id_token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'&amp;username='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'&amp;email='</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">profile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getEmail</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc31f478974207-16\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc31f478974207-17\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe previous lines connect us to our server using an AJAX request. Pay attention to the line `xhr.open ('POST', '{{site_url|safe}}/login');`. It indicates the method that the request will use. The URL `{{site_url|safe}}` will be replaced by the value of the `site_url` variable that we pass to the template. To do the reconfirmation, our Flask application only needs the `id_token`. However, we also pass the username and email since we will use them later for other operations.\n\nOnce the reconfirmation is done, our server will redirect us to `/`. If the reconfirmation was not successful, the user will have to try to log in again. Now, if we look carefully, we haven’t defined the `/login` endpoint yet. this endpoint will be responsible for reconfirming.\n\nTo create it, let’s go back to `notifier.py` and add the following lines:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">@app.route('/login',methods=[\"POST\"]) def login(): try: token = request.form.get(\"idtoken\") client_id = os.getenv(\"GOOGLE_CLIENT_ID\") infoid = id_token.verify_oauth2_token(token, google.auth.transport.requests.Request(), client_id) if infoid['iss'] not in ['accounts.google.com', 'https://accounts.google.com']: raise ValueError('Wrong issuer.') userid = infoid['sub'] #Here is a good place to create the session session[\"user\"] = {\"userid\": userid, \"username\": request.form.get(\"username\"), \"email\": request.form.get(\"email\")} return userid except ValueError: return \"Error\" pass</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc321706306026-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc321706306026-16\">16</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/login'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"POST\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"idtoken\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">client_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"GOOGLE_CLIENT_ID\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">infoid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id_token</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">verify_oauth2_token</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">token</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">transport</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client_id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">infoid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'iss'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'accounts.google.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://accounts.google.com'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">raise </span><span class=\"crayon-e\">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Wrong issuer.'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">userid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">infoid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'sub'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-p\">#Here is a good place to create the session</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"userid\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">userid</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"username\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"username\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"email\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"email\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">userid</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-13\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">except </span><span class=\"crayon-v\">ValueError</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Error\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc321706306026-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">pass</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc321706306026-16\">&nbsp;</div></div></td></tr></tbody></table>\n\nAs mentioned above, to reconfirm the identity of the user on the server, we only need the `id_token` obtained from Google auth and passed to `/login` using an AJAX POST request. Then we get `client_id` using `os.getenv(\"GOOGLE_CLIENT_ID\")`.\n\nWhen we make the reconfirmation, we place our code within a `try/except` block for exception handling in case an error occurs at the time of making the request.\n\nThis verification is done using the `verify_oauth2_token` method and returns an `infoid` that must have a key `iss`, which is a reference to the`issuer`. If the value of the issuer does not match the domain we configured, we assume the verification returns an error and an exception will be generated. If, on the other hand, the response is valid, we proceed to create the persistent session on the server side, assigning `user` to the session object. Within this session, we store the `userid`, `username`, and `email` of the user.\n\nOnce this is done, our server returns the response and the `xhr.onload` event of our ajax request is triggered. Its function is to redirect us to `/`. In `/` our application evaluates if the `user` session exists, and if so, it will load the `home.html` template by passing the `session['user']`.\n\nFollowing the logic of our application, the next step is to create `home.html` in the`templates` directory:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">{% extends \"layout.html\" %} {% block content %} &lt;div id=\"user\" class=\"logged\"&gt; you are logged in as &lt;b&gt;{{ user.username }}&lt;/b&gt; - &lt;a id=\"logout\" class=\"teal-text\" href=\"/logout\"&gt;Logout&lt;/a&gt; &lt;/div&gt; {% endblock %}</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc323791798681-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc323791798681-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc323791798681-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc323791798681-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc323791798681-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc323791798681-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc323791798681-7\">7</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc323791798681-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"layout.html\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">content</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc323791798681-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"logged\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc323791798681-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">you</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">are</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">logged</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">username</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc323791798681-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"logout\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"teal-text\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/logout\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Logout</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc323791798681-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc323791798681-6\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc323791798681-7\">&nbsp;</div></div></td></tr></tbody></table>\n\nThis template inherits from layout, and in our `content` block we will show the logged user and a`logout` link to close the session. The latter is not programmed—to complete the login experience we will define the endpoint `logout` in `notifier.py`. Let’s add:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">@app.route('/logout') def logout(): session.pop(\"user\",None) return redirect(url_for('home'))</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc324617743102-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc324617743102-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc324617743102-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc324617743102-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc324617743102-5\">5</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc324617743102-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/logout'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc324617743102-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">logout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc324617743102-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc324617743102-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">redirect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">url_for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'home'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc324617743102-5\">&nbsp;</div></div></td></tr></tbody></table>\n\nOur `logout` endpoint deletes the user session and redirects us to `home`. Back at `home` it will evaluate the session, and if it doesn’t find any, it will render `login.html`.\n\n**Note:** `url_for` uses the handler name `def home()` for redirection, not the endpoint (although it is also valid to use endpoints for redirects). In the case of `url_for` needing to generate a url in `https`, the line should be: `url_for ('home', _external = True, _scheme = 'https')`. The external parameter indicates the generation of an absolute URL and scheme defines the protocol we want to use.\n\nAt this point, we can test if Google auth works. To test locally, let’s run the following command in our terminal:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">export FLASK_APP=notifier flask run</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc325409967119-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc325409967119-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc325409967119-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc325409967119-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">export </span><span class=\"crayon-v\">FLASK_APP</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">notifier</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc325409967119-2\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">flask </span><span class=\"crayon-i\">run</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc325409967119-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nWe are telling Flask to run `notifier.py`. However, it’s best to use a more robust server that allows for more efficient handling of our requests, thus improving the app performance. Therefore, we will use Gunicorn, an HTTP WSGI server written in Python and compatible with multiple frameworks (Flask included).\n\nTo install, let’s execute the following command in our terminal:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">pip install gunicorn</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc327662474096-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc327662474096-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc327662474096-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">gunicorn</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc327662474096-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nAfter installing, from the same terminal window and from our app’s root directory, type:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">gunicorn -b 0.0.0.0:80 notifier:app</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc328581583689-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc328581583689-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc328581583689-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">gunicorn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0.0.0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">notifier</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">app</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc328581583689-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nThis command deploys our application to our local server and listens for requests using port 80. With this, we should be able to access our app and test if we can log in and log out.\n\n**Note:** To stop the application, hit _ctrl+c_ in the same terminal window where gunicorn is running.\n\n## Storing Nightscout Settings with Firebase/Firestore\n\nIn this section, we will build a simple interface where our user can add the following data:\n\n*   **nightscout\\_api**: a valid Nightscout URL to obtain the glucose level data, (for example, `https://domain.ext/api/v1/entries.json`).\n*   **phone**: the mobile number where alerts will be sent.\n*   **emerg\\_contact**: preferred emergency contact (relative or close friend who can receive alerts).\n*   **extra\\_contacts**: an optional array with up to 5 additional phone numbers.\n*   **email**: The Google account email address to log in (we will use it as an external key to obtain the logs of a logged-in user).\n*   **username**: Also obtained from the user’s Google account, we will use it for data presentation.\n\n[Firestore](https://firebase.google.com/docs/firestore) allows us to handle _collections_ and _documents_ in a similar fashion to [mongodb](https://www.mongodb.com/). For this application, our collection will be called _scouts_. A document from our collection should look like this:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">{ \"email\": \"\", \"username\": \"\", \"phone\": \"\", \"emerg_contact\": \"\", \"nightscout_api\": \"\", \"extra_contacts\": [] }</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc329491098009-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc329491098009-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc329491098009-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc329491098009-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc329491098009-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc329491098009-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc329491098009-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc329491098009-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc329491098009-9\">9</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc329491098009-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc329491098009-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">\"email\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc329491098009-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">\"username\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc329491098009-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">\"phone\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc329491098009-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">\"emerg_contact\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc329491098009-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">\"nightscout_api\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc329491098009-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-s\">\"extra_contacts\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc329491098009-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc329491098009-9\">&nbsp;</div></div></td></tr></tbody></table>\n\n## Adding Firebase Firestore to Our Project\n\n*   Go to [https://firebase.google.com/](https://firebase.google.com/)\n*   Log in with your Google or GSuite account\n*   Click on _Go to Console_\n*   Click on _Add project_. If your previously created project used for Google auth does not appear on the list, click on _Add project_ . We should see our project name listed on _Enter the name of your project_ . Select it and click on _Continue_, Provide additional information for the next steps, and when finished click on _Create project_\n*   On the Firebase console page, click on _authentication_ and in the _sign in method_ tab, enable _Google_.\n*   Click on _Database_, and select _FIRESTORE_. Then _Database > Tab Rules_. Modify the existing rule as follows:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">rules_version = '2'; service cloud.firestore { match /databases/{database}/documents { match /{document=**} { allow read, write: if request.auth.uid != null; } } }</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32b616895512-9\">9</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32b616895512-1\"><span class=\"crayon-v\">rules_version</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32b616895512-2\"><span class=\"crayon-e\">service </span><span class=\"crayon-v\">cloud</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">firestore</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32b616895512-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">match</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">databases</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">database</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">documents</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32b616895512-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">match</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">document</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32b616895512-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">allow </span><span class=\"crayon-v\">read</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">write</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">auth</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">uid</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32b616895512-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32b616895512-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32b616895512-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32b616895512-9\">&nbsp;</div></div></td></tr></tbody></table>\n\nThis is to make sure only logged in users have access to our application.\n\n### Connecting the Project with Firebase\n\nOnce our project is set up on the Firebase console, we have to generate a Firebase key:\n\n*   Login to [https://console.firebase.google.com/](https://console.firebase.google.com/)\n*   Click on _Project Overview> Project settings_ and select the _Service account_ tab\n*   Click on the generate new private key option\n*   Save the JSON file in our application’s root directory. You can rename that file to whatever you want. I used: `super_private_key.json`\n\nThe next step is to add the name of your private key file to `.env` with the following line:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">FIREBASE_PRIVATE_KEY=\"./super_private_key.json\"</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32c952117627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32c952117627-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32c952117627-1\"><span class=\"crayon-v\">FIREBASE_PRIVATE_KEY</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"./super_private_key.json\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32c952117627-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nWith these initial preparations in order, we are ready to connect our application to Firebase/Firestore. In the case of data queries for Firestore, the ideal scenario in Python would be to have a class that we can reuse in our application that allows us to add, modify, or query records (CRUD). This way we keep our code simple, organized, and much easier to understand.\n\nBefore we write that code, we need to install the Python modules that will allow us to perform these operations (back to our terminal!):\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">pip install firebase-admin</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32d700113422-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32d700113422-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32d700113422-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">firebase</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">admin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32d700113422-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nLet’s create the `models.py` file and add the following lines:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">import firebase_admin, os from firebase_admin import credentials from firebase_admin import firestore from os.path import join, dirname from dotenv import load_dotenv</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32f745245723-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32f745245723-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32f745245723-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32f745245723-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc32f745245723-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc32f745245723-6\">6</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32f745245723-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">firebase_admin</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">os</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32f745245723-2\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">firebase_admin </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">credentials</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32f745245723-3\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">firebase_admin </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">firestore</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32f745245723-4\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">path </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">join</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dirname</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc32f745245723-5\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">dotenv </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">load</span><span class=\"crayon-sy\">_</span>dotenv</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc32f745245723-6\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe previous lines indicate which modules we will be using in our `models.py` file. Among these, we can see `firebase_admin`, which we will use to connect to our Firebase project and perform operations (CRUD) on our _scouts_ data collection. We will use `dotenv` to get the `FIREBASE_PRIVATE_KEY` variable from our `.env` file.\n\nIn the same file, add the following lines:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">envpath = join(dirname(__file__),\"./.env\") load_dotenv(envpath) credits = credentials.Certificate(os.getenv(\"FIREBASE_PRIVATE_KEY\")) firebase_admin.initialize_app(credits)</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc330123138012-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc330123138012-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc330123138012-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc330123138012-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc330123138012-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc330123138012-6\">6</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc330123138012-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">envpath</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">dirname</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__file__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"./.env\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc330123138012-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">load_dotenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">envpath</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc330123138012-3\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc330123138012-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">credits</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">credentials</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Certificate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"FIREBASE_PRIVATE_KEY\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc330123138012-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">firebase_admin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">initialize_app</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">credits</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc330123138012-6\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe first two lines are well known since we have previously used them in `notifier.py` to load our **environment** to extract the value of the `FIREBASE_PRIVATE_KEY` variable. The next two lines connect our application with Firebase using the private key we generated earlier. `credits = credentials.Certificate (os.getenv (\" FIREBASE_PRIVATE_KEY \"))` extracts the private key from the file as well as other additional data, and `firebase_admin.initialize_app (credits)` authenticates our application to use Firebase and initializes it to perform operations.\n\nOnce the connection with Firebase is defined, we will proceed to define the case model. Normally, when we use technologies such as `SQLAlchemy` to work with`flask` ​​and `sqlite`, the models are classes where we define different attributes that are the fields of the database and use a set of native functions of the model to perform operations on the database.\n\nIn our case, we will create the `model` class as a “bridge” class that will allow us to use the firestore methods to perform database operations. In other words, `model` will function as a parent class from which other classes will inherit to return their methods. Then we add the code to the end of the `models.py` file:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">class model: def __init__(self,key): self.key = key self.db = firestore.client() self.collection = self.db.collection(self.key) def get_by(self, field, value): docs = list(self.collection.where(field,u'==',u'{0}'.format(value)).stream()) item = None if docs != None: if len(docs) &gt; 0: item = docs[0].to_dict() item['id'] = docs[0].id return item def get_all(self): docs = self.collection.stream() items = [] for doc in docs: item = None item = doc.to_dict() item['id'] = doc.id items.append(item) if len(items) &gt; 0: return items else: return None def add(self, data, id=None): if id == None: self.collection.add(data) else: self.collection.document(u'{0}'.format(id)).set(data) return True def update(self, data, id): if id != None: if data != None: doc = self.collection.document(u'{id}'.format(id=id)) doc.update(data) return False</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc331061998159-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc331061998159-38\">38</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">model</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-4\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">db</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">firestore</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">client</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_by</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">field</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">field</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'=='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'{0}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">None</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-9\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">to_dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'id'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-13\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-14\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">items</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">doc </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">None</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-19\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">to_dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'id'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-21\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">items</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-24\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-26\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">document</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'{0}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">document</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'{id}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc331061998159-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc331061998159-38\">&nbsp;</div></div></td></tr></tbody></table>\n\nWithin the `model` class, we start defining our constructor. It will accept the `key` parameter representing the name of the collection inside Firestore. The builder also initializes the firestore client, `self.db= firestore.client()`, and the collection, `self.db.collection(self.key)`.\n\nThe `get_by` method receives the name of the field and the value by which we want to filter data from our collection. The line `docs= list(self.collection.where (field,u'==',u'{0}.format(value)).stream())` runs a query to our Firebase collection, `self.collection`, and is a reference to this collection defined in the constructor. In our collection, we use the `where` method to filter by field and value.\n\nPay special attention to the character `u`—this indicates that Python will send the field name and the value in `unicode` format. By using the code fragment `u'{0}.format(value)` we are telling Python that any value, regardless of type, should be formatted as `unicode`. The `stream` method, in turn, returns the flow of documents as a special type of data, so the `list` function is used to convert it into an array that can be traversed with Python.\n\nNormally, when making a query to Firestore to obtain data from a collection, for each record in the collection we would obtain an object with two attributes: the document id and the `to_dict()` method that formats the document to the Python dictionary type of data (a format that has a structure similar to JSON and that makes it easy for us to access each field).\n\nThe `get_by` function evaluates whether the document exists. If it exists, it creates a consolidated item with `item= docs[0].to_dict()` to store the document in a variable. With `item['id']= docs[0].id`, we add the id to the document to have all the information at our disposal. Another important detail is that `get_by` returns the first document found. We leave this as it is in our case. Once our user logs in with Google, they will only have access to a document that will contain their data (one and only one).\n\nWe define the `get_all` method, which does not receive any parameters. Its function is to obtain all the documents in a collection, consolidate them by creating a dictionary for each item, and fill out an array with each consolidated document. This function returns an array of all the documents in the collection, or `none` in case there are no documents.\n\nThe `add` method receives the `data` and `id` parameters. `id` is optional, but if it exists it allows us to add a new document with a defined id. If the parameter `id` does not exist, the new document will be created with an id automatically generated by Firestore. The parameter `data` must be of type `dictionary` and will contain the data that we want to add to our collection.\n\nFinally, we define the `update` method, which receives the parameters `data` and `id`, both of which are required. While `data` contains a `dict` indicating which fields will be altered with what values, `id` defines which document in the collection we will be modifying.\n\nNext, we will add the `scout` class. The purpose of this class is to act as an interface that allows us to pass the data of our scout collection more directly without thinking of unnecessary formatting when adding new documents. Let’s add the following code to `models.py`:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">class scout: def __init__(self, email = '', username = '', nightscout_api = '', phone = '', emerg_contact = '', extra_contacts = []): self.email = email self.username = username self.nightscout_api = nightscout_api self.phone = phone self.emerg_contact = emerg_contact self.extra_contacts = extra_contacts</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc333025345758-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc333025345758-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc333025345758-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc333025345758-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc333025345758-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc333025345758-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc333025345758-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc333025345758-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc333025345758-9\">9</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc333025345758-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scout</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc333025345758-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">email</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">username</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nightscout_api</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">phone</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">emerg_contact</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc333025345758-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">email</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">email</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc333025345758-4\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">username</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">username</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc333025345758-5\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nightscout_api</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nightscout_api</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc333025345758-6\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">phone</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">phone</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc333025345758-7\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">emerg_contact</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">emerg_contact</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc333025345758-8\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extra</span><span class=\"crayon-sy\">_</span>contacts</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc333025345758-9\">&nbsp;</div></div></td></tr></tbody></table>\n\n**Note:** We will go into more detail on how this class will be used later.\n\nFinally, let’s add the `scouts` class that inherits from the`model` class to reuse its methods and in turn has its own methods to interact with the scout collection. Let’s add the code at the end of the `models.py` file:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">class scouts(model): def __init__(self): super().__init__(u'scouts') def get_by_email(self, email): docs = list(self.collection.where(u'email',u'==',u'{0}'.format(email)).stream()) item = None if docs != None: if len(docs) &gt; 0: item = docs[0].to_dict() item['id'] = docs[0].id return item def getby_personal_phone(self,phone): return self.get_by(u'phone',phone) def add(self, data, id = None): if type(data) is scout: super().add(data.__dict__,id) else: super().add(data,id)</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc335610846611-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc335610846611-19\">19</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-1\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scouts</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'scouts'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_by_email</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">email</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">collection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">where</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'email'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'=='</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'{0}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">email</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">None</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-7\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">to_dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'id'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-11\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-12\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">getby_personal_phone</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">phone</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_by</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">phone</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scout</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__dict__</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc335610846611-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc335610846611-19\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe scouts class inherits from the model. In its constructor we call the parent constructor and pass it `scouts`, which is nothing more than the key that the `model` constructor expects to reference a collection in Firebase.\n\nThen we find the `get_by_email` method, which obtains the first document from the `scouts` collection that matches the email provided. This method will be used to obtain the Nightscout data of each user connected using a Google account.\n\nThe method `getby_personal_phone` receives a phone parameter (the user’s personal telephone) and will return the document associated with that data. This method calls the `get_by` method of the`model` class and it will be very useful to obtain user data when we are running the `nexmo` events webhook.\n\nFinally, we have the `add` method. IF `data` is an instance of the`scout` class, we will convert its attributes to dictionary with `data.__dict__`. The `id` attribute is optional for this method. Pay attention that this method, in turn, calls the `add` method of the model class for reuse.\n\nDon’t forget to send the file!!⭐️\n\n### Playing with the Python Console\n\nA very practical (and maybe fun?) way to test what we have done is with the Python console. Before the fun begins, open the Firebase console in your browser and click on the _Database_ option. Make sure to select _Cloud Firestore_ in the upper left corner next to _Database_.\n\nLet’s go to our terminal. From our project folder, execute the `python` command. This will take us to the Python console where we can run Python code. In the python console, we execute the following commands:\n\n*   Import our previously created python module:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">&gt;&gt;&gt; import models &gt;&gt;&gt; from models import model, scouts, scout</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc337523885310-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc337523885310-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc337523885310-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc337523885310-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">models</span><span class=\"crayon-h\"></span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc337523885310-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">models </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">scout</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc337523885310-3\">&nbsp;</div></div></td></tr></tbody></table>\n\n*   Create an instance of the scouts class called `scout_firebase` and add a document to Firebase. Review the Firebase console after executing the `add` method. In Firestore, a new document will be added with the data provided. Pay special attention to the add method—we pass an instance of the `scout` class with all the corresponding data. Internally the `add` method converts the instance of the class to dictionary:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">&gt;&gt;&gt; scouts_firebase= scouts() &gt;&gt;&gt; scouts_firebase.add(scout(email='email@gmail.com ',nightscout_api ='someurl', phone ='12345678', emerg_contact='23456789', extra_contacts=['34567890']))</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc339019457687-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc339019457687-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc339019457687-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc339019457687-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts_firebase</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scouts</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc339019457687-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts_firebase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">scout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">email</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'email@gmail.com '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">nightscout_api</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'someurl'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">phone</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'12345678'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">emerg_contact</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'23456789'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'34567890'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc339019457687-3\">&nbsp;</div></div></td></tr></tbody></table>\n\n*   Get all the documents from our scouts collection:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">&gt;&gt;&gt; docs = scouts_firebase.get_all() &gt;&gt;&gt; print(docs)</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33a240569307-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33a240569307-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33a240569307-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33a240569307-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts_firebase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33a240569307-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33a240569307-3\">&nbsp;</div></div></td></tr></tbody></table>\n\n*   Update the document we added (in this case we only update the `nightscout_api` field). We can check the update in the Firebase console. Later, we obtain the document using the `get_by_email` method and print item to confirm that the field value was in effect updated:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">&gt;&gt;&gt; scouts_firebase.update({u'nightscout_api':'some_testing_url'},docs[0]['id']) &gt;&gt;&gt; item = scouts_firebase.get_by_email('email@gmail.com') &gt;&gt;&gt; print(item)</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33b311301897-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33b311301897-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33b311301897-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33b311301897-4\">4</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33b311301897-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts_firebase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'nightscout_api'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'some_testing_url'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'id'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33b311301897-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts_firebase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_by_email</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'email@gmail.com'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33b311301897-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33b311301897-4\">&nbsp;</div></div></td></tr></tbody></table>\n\nTo close the Python console just type `quit()` to go back to the terminal.\n\n### Create the User Data Configuration Interface\n\nWith the defined data models, the next step is to create the interface that will receive the data of the connected user, with Google auth. Our application will be in charge of using the model to store this information.\n\nIn `notifier.py`, just under the last `import` add the following lines:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">import models from models import model, scouts, scout</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33c916469169-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33c916469169-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33c916469169-3\">3</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33c916469169-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">models</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33c916469169-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">models </span><span class=\"crayon-e\">import </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scouts</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">scout</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33c916469169-3\">&nbsp;</div></div></td></tr></tbody></table>\n\nThis adds the `models` module to the `notifier.py` script and imports the `models`, `scouts`, and `scout` classes from the module to be able to use them. Later, before the lines that define the `get_session` function, add the code that initializes the `scouts` class:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">nightscouts = scouts()</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33d159550366-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33d159550366-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33d159550366-1\"><span class=\"crayon-v\">nightscouts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scouts</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33d159550366-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nNext, edit the `home` function, which controls the endpoint `/`. The function should be modified with the following workflow in mind: A user authenticates with Google auth to our application; If they are authenticating for the first time when `/` is loaded, an empty form will be presented with a `new` flag to indicate to the application that the user will insert a new document to Firebase. If the user who is connecting already exists before loading `/`, a query will be made to Firebase to bring the data related to that email, and the information will be shown on the form with the `edit` flag to indicate to the application that by submitting the form you will be modifying the document of an existing user.\n\nCurrently our `home` function is defined as follows:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">@app.route('/',methods=['GET','POST']) def home(): if get_session(\"user\") != None: return render_template(\"home.html\", user = get_session(\"user\")) else: return render_template(\"login.html\", client_id=os.getenv(\"GOOGLE_CLIENT_ID\"), site_url=os.getenv(\"SITE_URL\"))</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc33e020147630-7\">7</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33e020147630-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'GET'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33e020147630-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">home</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33e020147630-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33e020147630-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">render_template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"home.html\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33e020147630-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc33e020147630-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">render_template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"login.html\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client_id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"GOOGLE_CLIENT_ID\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">site_url</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SITE_URL\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc33e020147630-7\">&nbsp;</div></div></td></tr></tbody></table>\n\nWith the additional code, it should look like this:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">@app.route('/',methods=['GET','POST']) def home(): global scouts if get_session(\"user\") != None: if request.method == \"POST\": extra_contacts = request.form.getlist('extra_contacts[]') if request.form.get(\"cmd\") == \"new\": nightscouts.add(scout(email=get_session(\"user\")[\"email\"], username=get_session(\"user\")[\"username\"], nightscout_api=request.form.get('nightscout_api'), phone=request.form.get('phone'), emerg_contact=request.form.get('emerg_contact'), extra_contacts=extra_contacts)) else: nightscouts.update({u'nightscout_api':request.form.get('nightscout_api'), u'phone':request.form.get('phone'), u'emerg_contact':request.form.get('emerg_contact'),u'extra_contacts':extra_contacts},request.form.get('id')) return render_template(\"home.html\", user = get_session(\"user\"), scout = nightscouts.get_by_email(get_session(\"user\")[\"email\"])) else: return render_template(\"login.html\", client_id=os.getenv(\"GOOGLE_CLIENT_ID\"), site_url=os.getenv(\"SITE_URL\"))</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc340893756928-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc340893756928-14\">14</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">app</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">route</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'GET'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">def </span><span class=\"crayon-e\">home</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-3\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-m\">global</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scouts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-4\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">method</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"POST\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getlist</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'extra_contacts[]'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"cmd\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"new\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">nightscouts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">scout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">email</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"email\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">username</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"username\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nightscout_api</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'nightscout_api'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">phone</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">emerg_contact</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'emerg_contact'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">nightscouts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'nightscout_api'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'nightscout_api'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'emerg_contact'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'emerg_contact'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">u</span><span class=\"crayon-s\">'extra_contacts'</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">form</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'id'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">render_template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"home.html\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nightscouts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_by_email</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">get_session</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"email\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc340893756928-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">render_template</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"login.html\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client_id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"GOOGLE_CLIENT_ID\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">site_url</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getenv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"SITE_URL\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc340893756928-14\">&nbsp;</div></div></td></tr></tbody></table>\n\nBasically, we’ve added a conditional that assesses if the method used to access `/` is `POST`. If so, we can assume that the request has been made from a form.\n\nIn this case, we would be talking about the user configuration form. If the method used is `POST`, we ask if the flag (in this case `cmd`) is`new`. If so, the `add` method will be executed by adding the user’s new document.\n\n**Note:** We get `email` and `username` directly from the session, as this is data obtained from Google auth.\n\nIf the flag detected is `edit`, the new values ​​of the form are received and the `update` method of the `scouts` class is executed to update the document of the connected user.\n\n**Note:** `email` and `username` are not modified as they are exclusive data from Google.\n\nRegardless of the method used, in `render_template` we pass all the data of the connected user using the variable `scout = nightscouts.get_by_email(get_session(\"user\")[\"email\"])`, to fill the form with the configuration information in if the user exists. The form fields will be empty.\n\nNow let’s edit the `home.html` file. This jinja template is loaded only if the user has previously logged in. Currently, we only have one line of code within the block `content` indicating the connected user and the link for logout. Just below this, we will add the code that will receive the application data for the user.\n\nThe block should look like this:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">{% block content %} &lt;div id=\"user\" class=\"logged\"&gt; you are logged in as &lt;b&gt;{{ user.username }}&lt;/b&gt; - &lt;a id=\"logout\" class=\"teal-text\" href=\"/logout\"&gt;Logout&lt;/a&gt; &lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s8 offset-s2\"&gt; &lt;div class=\"card blue-grey darken-1\"&gt; &lt;div class=\"card-content white-text\"&gt; &lt;h1 class=\"card-title\"&gt;Your Scout Profile&lt;/h1&gt; &lt;div class=\"row\"&gt; &lt;form id=\"scout-form\" class=\"col s12\" method=\"POST\" action=\"/\"&gt; &lt;input type=\"hidden\" name=\"cmd\" value=\"{{ 'new' if scout == None else 'edit' }}\" /&gt; {% if scout!=None %} &lt;input type=\"hidden\" name=\"id\" value=\"{{ scout.id }}\" /&gt; {% endif %} &lt;div class=\"row\"&gt; &lt;div class=\"col s12 input-field\"&gt; &lt;input placeholder=\"E.g. https://domain.ext/api/v1/entries.json\" value=\"{{ scout.nightscout_api }}\" id=\"nightscout_api\" name=\"nightscout_api\" type=\"text\" class=\"validate\" required /&gt; &lt;label for=\"nightscout_api\" class=\"white-text\" &gt;Enter NightScout Api Entries Url (Entries url finish with &lt;b&gt;entries.json&lt;/b&gt;)&lt;/label &gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s12 input-field\"&gt; &lt;i class=\"material-icons prefix\"&gt;phone&lt;/i&gt; &lt;input placeholder=\"E.g. 50588888888\" id=\"phone\" name=\"phone\" value=\"{{ scout.phone }}\" type=\"tel\" class=\"validate\" pattern=\"[0-9]+\" required /&gt; &lt;label for=\"phone\" class=\"white-text\" &gt;Enter your mobile number&lt;/label &gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s12 input-field\"&gt; &lt;i class=\"material-icons prefix\"&gt;phone&lt;/i&gt; &lt;input placeholder=\"E.g. 50588888888\" id=\"emerg_contact\" name=\"emerg_contact\" value=\"{{ scout.emerg_contact }}\" type=\"tel\" class=\"validate\" pattern=\"[0-9]+\" required /&gt; &lt;label for=\"emerg_contact\" class=\"white-text\" &gt;Enter emergency contact&lt;/label &gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s12 add-contacts-container\"&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s6\"&gt; &lt;label class=\"white-text\" &gt;Add 5 additional contact numbers:&lt;/label &gt; &lt;/div&gt; &lt;div class=\"col s6 add_contact\"&gt; &lt;div class=\"right-align\"&gt; &lt;a onclick=\"add_contact()\" class=\"btn waves-effect waves-light red\" &gt;&lt;i class=\"material-icons\"&gt;group_add&lt;/i&gt;&lt;/a &gt; &lt;/div&gt; &lt;br /&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"divider\"&gt;&lt;/div&gt; &lt;div class=\"contact_numbers\" id=\"contact_numbers\"&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"row\"&gt; &lt;div class=\"col s12 right-align\"&gt; &lt;button class=\"waves-effect waves-light btn-small\" type=\"submit\" &gt; &lt;i class=\"material-icons left\"&gt;save&lt;/i&gt; Save &lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;/form&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; {% endblock %}</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc341425593336-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc341425593336-114\">114</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">content</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"user\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"logged\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">you</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">are</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">logged</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">username</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"logout\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"teal-text\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/logout\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">Logout</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-6\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s8 offset-s2\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"card blue-grey darken-1\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"card-content white-text\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">h1 </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"card-title\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Your </span><span class=\"crayon-e\">Scout </span><span class=\"crayon-v\">Profile</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">h1</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">form </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"scout-form\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s12\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">method</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"POST\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-14\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"hidden\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"cmd\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-16\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ 'new' if scout == None else 'edit' }}\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scout</span><span class=\"crayon-o\">!=</span><span class=\"crayon-v\">None</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"hidden\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"id\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ scout.id }}\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">endif</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-21\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s12 input-field\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-24\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">placeholder</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"E.g. https://domain.ext/api/v1/entries.json\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ scout.nightscout_api }}\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"nightscout_api\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"nightscout_api\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"validate\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">required</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">label </span><span class=\"crayon-st\">for</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"nightscout_api\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"white-text\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Enter </span><span class=\"crayon-e\">NightScout </span><span class=\"crayon-e\">Api </span><span class=\"crayon-e\">Entries </span><span class=\"crayon-e\">Url</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Entries </span><span class=\"crayon-e\">url </span><span class=\"crayon-e\">finish </span><span class=\"crayon-v\">with</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">entries</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">json</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">label</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s12 input-field\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"material-icons prefix\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">phone</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-41\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-42\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">placeholder</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"E.g. 50588888888\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"phone\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"phone\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ scout.phone }}\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-46\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"tel\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-47\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"validate\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-48\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">pattern</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"[0-9]+\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-49\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">required</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-50\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-51\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">label </span><span class=\"crayon-st\">for</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"phone\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"white-text\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-52\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Enter </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">mobile </span><span class=\"crayon-v\">number</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">label</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-53\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-54\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-55\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-56\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-57\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s12 input-field\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-58\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"material-icons prefix\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">phone</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-59\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-60\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">placeholder</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"E.g. 50588888888\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-61\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"emerg_contact\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-62\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"emerg_contact\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-63\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{{ scout.emerg_contact }}\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-64\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"tel\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-65\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"validate\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-66\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">pattern</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"[0-9]+\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-67\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">required</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-68\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-69\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">label </span><span class=\"crayon-st\">for</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"emerg_contact\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"white-text\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-70\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Enter </span><span class=\"crayon-e\">emergency </span><span class=\"crayon-v\">contact</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">label</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-71\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-72\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-73\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-74\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-75\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s12 add-contacts-container\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-76\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-77\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s6\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-78\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">label </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"white-text\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-79\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-i\">Add</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">additional </span><span class=\"crayon-e\">contact </span><span class=\"crayon-v\">numbers</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">label</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-80\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-81\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-82\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s6 add_contact\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-83\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"right-align\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-84\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-85\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">onclick</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"add_contact()\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-86\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"btn waves-effect waves-light red\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-87\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"material-icons\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">group_add</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-88\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-89\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-90\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">br</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-91\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-92\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-93\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"divider\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-94\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"contact_numbers\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"contact_numbers\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-95\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-96\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-97\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"row\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-98\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"col s12 right-align\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-99\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">button</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-100\"><span class=\"crayon-e\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"waves-effect waves-light btn-small\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-101\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"submit\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-102\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-103\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"material-icons left\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">save</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Save</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-104\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">button</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-105\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-106\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-107\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">form</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-108\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-109\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-110\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-111\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-112\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc341425593336-113\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc341425593336-114\">&nbsp;</div></div></td></tr></tbody></table>\n\nIf the `scout` variable has a value of `None`, the flag `cmd` will have the value `new`—otherwise the value will be `edit`. The values of the text fields receive `{{scout.phone}}`, so when `scout` is `None` jinja will print empty. When `scout` exists the id is received in a hidden type field. This field should not be modified since it is the unique identifier of the document in Firebase. The `add_contact()` JavaScript function is undefined.\n\nLet’s add some more code in `home.html`, just after`{% endblock %}`. In this case, we will use the `script` block that we define in `layout.html` to define the necessary JavaScript functions:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">{% block script %} &lt;script language=\"javascript\"&gt; var contacts_numbers = null; var container = null; var incremental = 0; window.addEventListener('load', function(event){ container = document.getElementById(\"contact_numbers\"); contact_numbers = container.getElementsByClassName(\"contact_number\"); var extra_contacts = validate({{ scout.extra_contacts|safe }}); //var extra_contacts = {{ scout.extra_contacts|safe if scout else \"Array()\" }}; for(var p=0;p&lt;extra_contacts.length;p++){ add_contact(extra_contacts[0]); } }); function validate(value){ if(value!==null &amp; value!==undefined) return value; else return Array(); } function add_contact(value){ if(contact_numbers.length &lt; 5){ incremental += 1; var div = document.createElement(\"div\"); div.className = 'row contact_number'; div.setAttribute('id','id_'+incremental); if(!(value!=null &amp;&amp; value!==undefined)){ value = \"\"; } div.innerHTML += '&lt;div class=\"col s12 input-field\"&gt;&lt;i class=\"material-icons prefix\"&gt;contact_phone&lt;/i&gt;&lt;input placeholder=\"E.g. 50588888888\" name=\"extra_contacts[]\" value=\"'+value+'\" type=\"tel\" class=\"validate\" pattern=\"[0-9]+\"&gt;&lt;i class=\"material-icons prefix sufix delete\" onclick=\"delete_contact(\\'id_'+incremental+'\\')\"&gt;delete&lt;/i&gt;&lt;/div&gt;'; container.appendChild(div); contact_numbers = container.getElementsByClassName(\"contact_number\"); }else{ M.toast({html: 'Sorry, You can just add a maximun of 5 contact numbers'}); } } function delete_contact(id){ contact_number = document.getElementById(id); container.removeChild(contact_number); } &lt;/script&gt; {% endblock %}</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1bdc343261725891-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1bdc343261725891-49\">49</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">block </span><span class=\"crayon-v\">script</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-2\"><span class=\"crayon-h\"></span><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">language</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"javascript\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-3\"><span class=\"crayon-h\"></span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">contacts_numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-4\"><span class=\"crayon-h\"></span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-5\"><span class=\"crayon-h\"></span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">incremental</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-6\"><span class=\"crayon-h\"></span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'load'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-7\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-8\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"contact_numbers\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-9\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">contact_numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"contact_number\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-10\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-11\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">validate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scout</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">safe</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-12\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-c\">//var extra_contacts = {{ scout.extra_contacts|safe if scout else \"Array()\" }};</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-13\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">p</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">add_contact</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">extra_contacts</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-15\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-16\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-17\"><span class=\"crayon-h\"></span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-18\"><span class=\"crayon-h\"></span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">validate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-19\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">!==</span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">!==</span><span class=\"crayon-v\">undefined</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-20\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-21\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-22\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-23\"><span class=\"crayon-h\"></span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-24\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-25\"><span class=\"crayon-h\"></span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add_contact</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-26\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">contact_numbers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-27\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">incremental</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-28\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">div</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createElement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"div\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-29\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">className</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'row contact_number'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-30\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setAttribute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'id'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'id_'</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">incremental</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-31\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">!=</span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">!==</span><span class=\"crayon-v\">undefined</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e \">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-33\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-34\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">innerHTML</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&lt;div class=\"col s12 input-field\"&gt;&lt;i class=\"material-icons prefix\"&gt;contact_phone&lt;/i&gt;&lt;input placeholder=\"E.g. 50588888888\" name=\"extra_contacts[]\" value=\"'</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">'\" type=\"tel\" class=\"validate\" pattern=\"[0-9]+\"&gt;&lt;i class=\"material-icons prefix sufix delete\" onclick=\"delete_contact(\\'id_'</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">incremental</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">'\\')\"&gt;delete&lt;/i&gt;&lt;/div&gt;'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-35\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">appendChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">div</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-36\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">contact_numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"contact_number\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-37\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-38\"><span class=\"crayon-h\">&nbsp;&nbsp; </span><span class=\"crayon-v\">M</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toast</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sorry, You can just add a maximun of 5 contact numbers'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-39\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-40\"><span class=\"crayon-h\"></span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-41\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-42\"><span class=\"crayon-h\"></span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete_contact</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-43\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">contact_number</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-44\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">container</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">removeChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">contact_number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-45\"><span class=\"crayon-h\"></span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-46\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-47\"><span class=\"crayon-h\"></span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1bdc343261725891-48\"><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endblock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1bdc343261725891-49\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn the `script` block we define three functions and the event listener of `onload` page. The `validate` function evaluates whether the value of `{{scout.extra_contacts|safe}}` passed by jinja is empty. If that’s the case, then `validate` returns an empty `Array()`, otherwise jinja returns the `extra_contacts` array.\n\nIf, when loading the page, `extra_contacts` contains information, the function `add_contact` is executed for each position of the `extra_contacts` array, passing the value of the phone number to the value attribute of the input.\n\nThe function `add_contact()` dynamically adds a text field where the user can type an additional telephone number, up to the five allowed. Each input will have an icon to be clicked on to eliminate the record. This same function evaluates whether the number of allowed contacts has been reached. In that case, `M.toast` of materialize is used to display an alert to the user indicating that they cannot add more than five contact numbers. This function is triggered when loading `/` and when clicking on the button to add telephone numbers.\n\nThe `delete_contact()` function removes the record created by `add_contact()`. The function is triggered from the `onclick` event of the delete icon added by `add_contact` for each input.\n\nWith these last details, we have concluded configuring Google auth login and Firebase/Firestore for storage and reading data.\n\nAt this point, we should be able to log in with Google, add our Nightscout configuration from the form, save our data in Firestore, modify our configuration, and properly log out.\n\n## To Be Continued!\n\nThe next step will be to set up/configure the app in Nexmo and to create a scheduler in Python for the Nightscout alerts. Check back in next week to read Part Two of this tutorial."}