{"_filedata":{"slug":"nexmo-ruby-new-release-host-overriding-dr"},"title":"Nexmo Ruby v6.3.0 Release: Static Type Checking and Host Overriding","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/02/E_Ruvy-SDK-Update_1200x600.png","author":301,"published":true,"published_at":"2020-02-26T12:01:14","tags":[360,375,1602],"body":"<p>The Nexmo Ruby SDK recently released <a href=\"https://rubygems.org/gems/nexmo\">v6.3.0</a>, which adds support for overriding the host used for API requests.</p>\n<p>The new release also introduces static type checking into the codebase for the first time. Static type checking is a new area in the Ruby ecosystem, and we are excited to be incorporating it to build a more explicit developer experience for those using the SDK in their applications.</p>\n<h2>Host Overriding</h2>\n<p>Before v6.3.0, the default hosts for Nexmo APIs, <code>api.nexmo.com,</code> and <code>rest.nexmo.com</code>, were not able to be directly changed inside the Ruby SDK. The most common reason why a developer would want to specify the host is to make their HTTP requests to the API directly towards one of the location-specific data centers.</p>\n<p>You can read the recent <a href=\"https://www.nexmo.com/blog/2020/01/17/nexmo-node-server-sdk-support-host-overriding-dr\">Node.js SDK Update blog post</a> for further detail on how this change could benefit your development.</p>\n<p>To demonstrate this new ability in the Ruby SDK, we will examine the <a href=\"https://developer.nexmo.com/voice/voice-api/code-snippets/make-an-outbound-call-with-ncco/ruby\">&#8220;Make an outbound call with an NCCO&#8221;</a> Ruby Code Snippet and alter it to use the US East Coast Data Center for the phone call:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bcd7dc63749570685\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nclient = Nexmo::Client.new(\n  application_id: NEXMO_APPLICATION_ID,\n  private_key: File.read(NEXMO_APPLICATION_PRIVATE_KEY_PATH),\n  api_host: 'api-us-1.nexmo.com'\n)\n\nclient.calls.create(\n  to: [{\n    type: 'phone',\n    number: TO_NUMBER\n  }],\n  from: {\n    type: 'phone',\n    number: NEXMO_NUMBER\n  },\n  ncco: [\n    {\n      'action' =&gt; 'talk',\n      'text' =&gt; 'This is a text to speech call from Nexmo'\n    }\n  ]\n)\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc63749570685-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-1\"><span class=\"crayon-v\">client</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nexmo</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">Client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">new</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">application_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NEXMO_APPLICATION_ID</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">private_key</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">File</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">NEXMO_APPLICATION_PRIVATE_KEY_PATH</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">api_host</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'api-us-1.nexmo.com'</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-5\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-6\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-7\"><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">calls</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">number</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TO</span><span class=\"crayon-sy\">_</span>NUMBER</div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">from</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">number</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NEXMO</span><span class=\"crayon-sy\">_</span>NUMBER</div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">ncco</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'action'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'talk'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'text'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'This is a text to speech call from Nexmo'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-21\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc63749570685-22\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc63749570685-23\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<p>The only change we needed to make was to add the <code>api_host</code> parameter in the <code>client</code> instance. You do not need to specify the <code>api_host</code> parameter during initialization. If you do not, then the default host will be used. This is true for specifying the <code>rest_host</code> as well. However, if you want to direct your requests to a specific geo-located data center, you can now do so with the Ruby SDK.</p>\n<h2>Static Type Checking</h2>\n<p>In the development of our SDKs, we are always looking for ways that we can increase the productivity and joy of developers using the tools we create. Creating applications and services with external APIs presents its own set of particular circumstances when it comes to debugging your work.</p>\n<p>The introduction of static type checking in the Ruby SDK works to increase confidence in the API calls you are making with the SDK, and helps to both decrease and identify bugs as they occur.</p>\n<p>In this SDK release, the <a href=\"https://sorbet.org/\">Sorbet Gem</a> was installed into the codebase, and we have type checked the <code>Nexmo::SMS</code> class.</p>\n<p>We did so by adding a method signature to <code>Nexmo::SMS#send</code> and a method signature to the <code>private</code> method, <code>#unicode?</code>.</p>\n<p>The method signature for <code>Nexmo::SMS#send</code> confirms that the method returns an instance of <code>Nexmo::SMS::Response</code> and that the method parameters are in received in the form of a Hash:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bcd7dc67210224243\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nsig { params(params: T::Hash[Symbol, T.untyped]).returns(Nexmo::SMS::Response) }\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcd7dc67210224243-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcd7dc67210224243-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bcd7dc67210224243-1\"><span class=\"crayon-e\">sig</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">params</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">params</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">Hash</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Symbol</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">untyped</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">returns</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Nexmo</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">SMS</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">Response</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcd7dc67210224243-2\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0001 seconds] -->\r\n<p></p>\n<p>In future releases of the Ruby SDK, we will gradually introduce more type checks of classes and the methods within. We also released a <a href=\"https://www.youtube.com/playlist?list=PLWYngsniPr_mMVi6W3dhqMoc5qTwTi_vb\">3-part YouTube video series</a> on static type checking in Ruby, if you would like to explore the subject further.</p>\n<h2>What&#8217;s Next?</h2>\n<p>We are always iterating on our Ruby SDK to improve the experience of using it. Plans for future releases of the Ruby SDK include incorporating support for the <a href=\"https://developer.nexmo.com/messages/overview\">Messages</a> and <a href=\"https://developer.nexmo.com/dispatch/overview\">Dispatch</a> APIs, along with increasing our coverage of type checking.</p>\n<p>We welcome your comments, input, and suggestions. You can come to join the conversation on <a href=\"https://github.com/nexmo/nexmo-ruby\">GitHub</a> or the <a href=\"https://developer.nexmo.com/community/slack\">community Slack</a>.</p>\n"}