{"_filedata":{"slug":"nexmo-ruby-v7-0-0-release-dr"},"title":"Nexmo Ruby v7.0.0 Release","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/04/image.png","author":301,"published":true,"published_at":"2020-04-06T11:34:05","tags":[360,375,1647,1675],"body":"<p>The Nexmo Ruby SDK recently published a major version release, v7.0.0. This new version introduced improved support for API error handling, renamed an existing class name to match the rest of the Nexmo SDKs, and added more static typing.</p>\n<h2>API Error Handling</h2>\n<p>The most significant change in this new release is the way the SDK handles errors from our earliest legacy APIs. There are some Nexmo APIs, like the SMS API for example, that will return a <code>200 OK</code> HTTP status along with an error code to report that something went wrong.</p>\n<p>Previously, the SDK treated all API responses that returned a <code>200 OK</code> as a success and passed along to the user the body of the response. As a result, developers needed to create conditional checks in their code for an error code within the <code>200 OK</code> response to know if there was something wrong. A classic example of how this was previously done with the Ruby SDK is the following:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bcb905f2646243968\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nresponse = client.sms.send(\n  from: 'Acme Inc',\n  to: TO_NUMBER,\n  text: 'A text message sent using the Nexmo SMS API'\n)\n\nif response['messages'].first['status'] == 0\n  puts 'Success'\nelse\n  puts \"Error Code #{response['messages'].first['status']}: #{response['messages'].first['error-text']}\"\nend\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f2646243968-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f2646243968-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f2646243968-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f2646243968-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f2646243968-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f2646243968-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f2646243968-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f2646243968-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f2646243968-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f2646243968-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f2646243968-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f2646243968-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f2646243968-1\"><span class=\"crayon-v\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f2646243968-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">from</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Acme Inc'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f2646243968-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TO_NUMBER</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f2646243968-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A text message sent using the Nexmo SMS API'</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f2646243968-5\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f2646243968-6\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f2646243968-7\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'messages'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">first</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'status'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f2646243968-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Success'</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f2646243968-9\"><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f2646243968-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-i\">puts</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Error Code #{response['messages'].first['status']}: #{response['messages'].first['error-text']}\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f2646243968-11\"><span class=\"crayon-st\">end</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f2646243968-12\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p></p>\n<p>Now, the SDK will check for non-zero status codes for you and raise an exception automatically in your code if the status code is non-zero. This removes the need for you to create conditional checks like the one above inside your application. Instead, a more condensed version now works:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bcb905f5477730301\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nresponse = client.sms.send(\n  from: 'Acme Inc',\n  to: TO_NUMBER,\n  text: 'A text message sent using the Nexmo SMS API'\n)\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f5477730301-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f5477730301-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f5477730301-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f5477730301-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bcb905f5477730301-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bcb905f5477730301-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f5477730301-1\"><span class=\"crayon-v\">response</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f5477730301-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">from</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Acme Inc'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f5477730301-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TO_NUMBER</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f5477730301-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A text message sent using the Nexmo SMS API'</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bcb905f5477730301-5\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bcb905f5477730301-6\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0001 seconds] -->\r\n<p></p>\n<p>If there is an issue, the SDK will raise an exception and report the <code>error-text</code> and <code>status</code> from the API to you. That information can be used to lookup more details in the API Reference. For example, each corresponding error code within the SMS API can be found inside the <a href=\"https://developer.nexmo.com/api/sms#errors\">API Reference</a> with more detail behind its meaning.</p>\n<h2>Class Naming</h2>\n<p>The Nexmo SDK team has been busy making sure that all of our SDKs conform to our <a href=\"https://github.com/Nexmo/server-sdk-specification/blob/master/SPECIFICATION.md\">Server Library Specification</a>. We recently revamped the specification-you can read about that work in a post by the Server SDK initiative lead, Chris Tankersley, on the <a href=\"https://www.nexmo.com/blog/2020/03/09/the-specifications-that-define-us-dr\">Nexmo blog</a>.</p>\n<p>As part of the Ruby SDK audit, we discovered that one of our classes had a name that was distinct from the rest of our SDKs. We know that many developers do not only work in one language, and it is important to us that the experience of using our SDKs remains as consistent as possible across languages. When there are differences they should be a result of particularities in each language, and idiosyncratic distinctions should be minimized.</p>\n<p>Therefore, we have renamed the <code>Calls</code> class to <code>Voice</code>. This is a a breaking change, so please be mindful of it when you choose to upgrade to the v7.0.0 release.</p>\n<h2>Static Typing</h2>\n<p>We introduced static typing into the Ruby SDK in the <a href=\"https://www.nexmo.com/blog/2020/02/26/nexmo-ruby-new-release-host-overriding-dr\">version 6.3.0 release</a>. You can read about our rationale for doing so in the <a href=\"https://www.nexmo.com/blog/2020/02/26/nexmo-ruby-new-release-host-overriding-dr\">release blog post</a> and follow along with some of the early adoption journey in our <a href=\"https://www.youtube.com/playlist?list=PLWYngsniPr_mMVi6W3dhqMoc5qTwTi_vb\">YouTube series</a>.</p>\n<p>We set on a path of gradually introducing more method signatures in each new release. In this release, we have introduced static type checking to the <code>Account</code> and <code>Alerts</code> classes. They join the previously type-checked <code>SMS</code> class in our growing list of statically typed classes.</p>\n<h2>What&#8217;s Next?</h2>\n<p>We have more exciting development for the Ruby SDK in the pipeline. They include adding the <a href=\"https://developer.nexmo.com/api/conversation\">Conversations</a>, <a href=\"https://developer.nexmo.com/api/messages-olympus\">Messages</a> and <a href=\"https://developer.nexmo.com/api/dispatch\">Dispatch</a> APIs once they move out of beta and into general availability.</p>\n<p>The SDK codebase is publicly available on <a href=\"https://github.com/nexmo/nexmo-ruby\">GitHub</a>, and we welcome contributions and involvement. Join us in the conversation on GitHub or connect with us on the <a href=\"https://developer.nexmo.com/community/slack\">Nexmo Community Slack</a>.</p>\n"}