{"_filedata":{"slug":"sentiment-analysis-with-opentok-and-azure-face-api-dr"},"title":"I See What You&#8217;re Saying: Sentiment Analysis With OpenTok and Azure Face API","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/01/E_Sentiment-Analysis_OpenTok_1200x600.jpg","author":353,"published":true,"published_at":"2020-01-27T22:27:30","tags":[360,1671,1435,1376,1429],"body":"<p>You know that person. It could be your significant other, a child, a co-worker, or a friend. The person that says one thing, but you can tell by their face, they mean something completely different. You probably just pictured them in your head. Maybe you remember the exact conversation. Perhaps it went like this:</p>\n<blockquote><p>\n  <strong>You:</strong> Okay?</p>\n<p>  <strong>Them:</strong> Fine.\n</p></blockquote>\n<p><em>Spoiler Alert:</em> It wasn&#8217;t fine.</p>\n<p>Wouldn&#8217;t it be great if you could know the sentiment behind what they were saying? With OpenTok and Azure&#8217;s Face API you can!</p>\n<p>In this tutorial, we will build a multi-party video conference that allows us to analyze the sentiment of each participant based on their facial expression. Then we&#8217;ll display that sentiment as an emoji over their video.</p>\n<h2>Prerequisites</h2>\n<p>Before getting started, you&#8217;ll need a few things:</p>\n<ul>\n<li>A TokBox Account â€” <a href=\"https://tokbox.com/account\">create one for free</a> if you haven&#8217;t already</li>\n<li>A free Azure Account with <a href=\"https://azure.microsoft.com/en-us/services/cognitive-services/face/\">Face API Cognitive Service</a></li>\n<li>Optional: <a href=\"https://ngrok.com/\">Ngrok</a> for test deployment</li>\n</ul>\n<blockquote><p>\n  Want to skip to the end? You can find all the source code for this tutorial on <a href=\"https://github.com/opentok-community/video-azure-sentiment\">GitHub</a>.\n</p></blockquote>\n<h2>Getting Started</h2>\n<p>We&#8217;ll use JavaScript to do the heavy lifting, so let&#8217;s get the HTML &amp; CSS out of the way.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8cc939185649\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nmkdir video-sentiment\ncd video-sentiment\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cc939185649-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cc939185649-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cc939185649-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cc939185649-1\"><span class=\"crayon-e\">mkdir </span><span class=\"crayon-v\">video</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sentiment</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cc939185649-2\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">video</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">sentiment</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cc939185649-3\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0001 seconds] -->\r\n<p></p>\n<p>In the root of the video-sentiment folder, create an <code>index.html</code> file and copy the following to it.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8cf241096460\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;OpenTok Sentiment Analysis&lt;/title&gt;\n\n    &lt;link href=\"https://emoji-css.afeld.me/emoji.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;link href=\"css/app.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n\n    &lt;a href=\"https://static.opentok.com/v2/js/opentok.min.js\"&gt;https://static.opentok.com/v2/js/opentok.min.js&lt;/a&gt;\n\n    &lt;!-- Polyfill for fetch API so that we can fetch the sessionId and token in IE11 --&gt;\n    &lt;a href=\"https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js\"&gt;https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js&lt;/a&gt;\n    &lt;a href=\"https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js\"&gt;https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js&lt;/a&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n\n    &lt;div id=\"videos\"&gt;\n      &lt;div id=\"subscriber\"&gt;&lt;/div&gt;\n      &lt;div id=\"publisher\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Footer will go here --&gt;\n\n    &lt;a href=\"http://js/config.js\"&gt;http://js/config.js&lt;/a&gt;\n    &lt;a href=\"http://js/app.js\"&gt;http://js/app.js&lt;/a&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8cf241096460-28\">28</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">DOCTYPE </span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">OpenTok </span><span class=\"crayon-e\">Sentiment </span><span class=\"crayon-v\">Analysis</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-5\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">link </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://emoji-css.afeld.me/emoji.css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"stylesheet\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">link </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"css/app.css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rel</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"stylesheet\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/css\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-8\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://static.opentok.com/v2/js/opentok.min.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//static.opentok.com/v2/js/opentok.min.js&lt;/a&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-10\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Polyfill </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fetch </span><span class=\"crayon-e\">API </span><span class=\"crayon-e\">so </span><span class=\"crayon-e\">that </span><span class=\"crayon-e\">we </span><span class=\"crayon-e\">can </span><span class=\"crayon-e\">fetch </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">sessionId </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">token </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IE11</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js&lt;/a&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js&lt;/a&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-14\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-16\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"videos\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"subscriber\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"publisher\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-21\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Footer </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">go </span><span class=\"crayon-v\">here</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-23\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://js/config.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//js/config.js&lt;/a&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://js/app.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//js/app.js&lt;/a&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-26\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8cf241096460-27\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8cf241096460-28\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<p>Next, create a <code>css</code> directory and add an <code>app.css</code> file to it. Copy the CSS below into that file.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8d1944938872\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nbody,\nhtml {\n  height: 100%;\n  background-color: black;\n  margin: 0;\n  padding: 0;\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n#videos {\n  width: 100%;\n  height: 50%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n#subscriber {\n  width: 100%;\n  height: 100%;\n}\n\n#publisher {\n  position: absolute;\n  bottom: 50px;\n  right: 0px;\n  z-index: 100;\n}\n\n.OT_subscriber {\n  width: 300px !important;\n  height: 200px !important;\n  float: left;\n  margin: 5px !important;\n}\n\n.OT_widget-container {\n  padding: 6px 0 0 6px !important;\n  background-color: #70B7FD !important;\n}\n\n#publisher .OT_widget-container {\n  padding: 6px 0 0 6px !important;\n  background-color: hotpink !important;\n}\n\n.sentiment {\n  position: absolute;\n  z-index: 9000;\n  height: 100px;\n  width: 100px;\n  font-size: 48px;\n}\n\nfooter {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 30px;\n  padding: 10px;\n  background-color: gray;\n}\n\nbutton {\n  font-size: 16px;\n  padding: 5px 10px;\n  display: inline;\n}\n\nul {\n  float: right;\n  display: inline;\n  list-style: none;\n  padding: 5px 10px;\n  margin: 0;\n}\n\nli {\n  display: inline;\n  background-color: lightgrey;\n  padding: 10px;\n  display: none;\n}\nli.used {\n  display: inline;\n}\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d1944938872-87\">87</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-1\"><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-2\"><span class=\"crayon-e\">html</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">background</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">black</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">family</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Arial</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Helvetica</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sans</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">serif</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-9\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-10\"><span class=\"crayon-p\">#videos {</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">width</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">left</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-14\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">right</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-15\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-16\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-17\"><span class=\"crayon-p\">#subscriber {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-18\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">width</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-19\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-20\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-21\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-22\"><span class=\"crayon-p\">#publisher {</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-23\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">position</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">absolute</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-24\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">bottom</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-25\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">right</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-26\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">z</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-27\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-28\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-29\"><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">OT</span><span class=\"crayon-sy\">_</span>subscriber<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-30\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">width</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">300px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-31\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-32\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">float</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-33\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-34\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-35\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-36\"><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">OT_widget</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">container</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-37\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6px</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-38\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">background</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#70B7FD !important;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-39\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-40\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-41\"><span class=\"crayon-p\">#publisher .OT_widget-container {</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-42\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6px</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6px</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-43\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">background</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hotpink</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">important</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-44\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-45\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-46\"><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sentiment</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-47\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">position</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">absolute</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-48\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">z</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-49\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-50\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">width</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-51\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">48px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-52\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-53\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-54\"><span class=\"crayon-e\">footer</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-55\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">position</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">absolute</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-56\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">left</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-57\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">right</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-58\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">bottom</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-59\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-60\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-61\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">background</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gray</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-62\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-63\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-64\"><span class=\"crayon-e\">button</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-65\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-66\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5px</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-67\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inline</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-68\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-69\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-70\"><span class=\"crayon-e\">ul</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-71\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">float</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-72\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inline</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-73\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">list</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">style</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">none</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-74\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5px</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-75\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-76\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-77\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-78\"><span class=\"crayon-e\">li</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-79\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inline</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-80\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">background</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lightgrey</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-81\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">padding</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-82\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">none</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-83\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-84\"><span class=\"crayon-v\">li</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">used</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-85\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">display</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inline</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d1944938872-86\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d1944938872-87\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h2>Let&#8217;s Get Configured</h2>\n<p>Great! Now we can make that pretty HTML &amp; CSS do something. Create a <code>js</code> folder and add a <code>config.js</code> file.</p>\n<p>The <code>config.js</code> file contains configuration parameters that we&#8217;ll get from our TokBox and Azure accounts. Copy the following into the <code>config.js</code> file.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8d2192315068\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\n// Replace these values with those generated in your TokBox and Azure Accounts\nconst OPENTOK_API_KEY = '';\nconst OPENTOK_SESSION_ID = '';\nconst OPENTOK_TOKEN = '';\nconst AZURE_FACE_API_SUBSCRIPTION_KEY = '';\nconst AZURE_FACE_API_ENDPOINT = '';\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d2192315068-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d2192315068-1\"><span class=\"crayon-c\">// Replace these values with those generated in your TokBox and Azure Accounts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d2192315068-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OPENTOK_API_KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d2192315068-3\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OPENTOK_SESSION_ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d2192315068-4\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OPENTOK_TOKEN</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d2192315068-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AZURE_FACE_API_SUBSCRIPTION_KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d2192315068-6\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AZURE_FACE_API_ENDPOINT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d2192315068-7\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p></p>\n<h3>OpenTok Settings</h3>\n<p>We&#8217;ll get the <code>OPENTOK_API_KEY</code>, <code>OPENTOK_SESSION_ID</code> and <code>OPENTOK_TOKEN</code> variables from our TokBox Account.</p>\n<p>In your TokBox Account, click the &#8216;Projects&#8217; menu and &#8216;Create New Project.` Then click the &#8216;Create Custom Project&#8217; button. Give your new project a name and press the &#8216;Create&#8217; button. You can leave the preferred codec as &#8216;VP8&#8217;.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2020/01/tb-project-created.png\" alt=\"Screenshot of the &quot;project created&quot; dialog within a TokBox account.\" /></p>\n<p>You can then copy your API Key and paste it as the value for the <code>OPENTOK_API_KEY</code> setting.</p>\n<p>Next, click on &#8220;View Project&#8221;. At the bottom of the project detail page, you&#8217;ll find the Project Tools where you can create a Session ID and Token. Choose &#8220;Routed&#8221; for your session&#8217;s media mode and press the &#8220;Create Session ID&#8221; button. Then, copy the generated Session ID and paste it as the value of the <code>OPENTOK_SESSION_ID</code> setting.</p>\n<p>Finally, paste the generated session ID into the Session ID field of the Generate Token form and press the &#8220;Generate Token&#8221; button. Copy the generated Token as the value of the <code>OPENTOK_TOKEN</code> setting.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2020/01/tb-project-tools.png\" alt=\"Project Tools area of a specific project in a TokBox account.\" /></p>\n<h3>Azure Face API Settings</h3>\n<p>Log into your Azure account and create a new Face API Cognitive Service. Once created, click on the service and go to the &#8220;Quick start&#8221; blade. There you&#8217;ll find your <code>Key</code> and <code>Endpoint</code>. Copy these two values to the <code>AZURE_FACE_API_SUBSCRIPTION_KEY</code> and <code>AZURE_FACE_API_ENDPOINT</code> settings, respectively.</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2020/01/azure-face-quickstart.png\" alt=\"Screenshot of the Quick start blade within Azure for the Face API service.\" /></p>\n<h2>I Feel Seen</h2>\n<p>With our configuration ready, let&#8217;s add some JavaScript to connect to an OpenTok session. Add an <code>app.js</code> file to the js folder and copy the following to it.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8d4820568183\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nvar opentok_api_key;\nvar opentok_session_id;\nvar opentok_token;\nvar azure_face_api_subscription_key;\nvar azure_face_api_endpoint;\n\n// See the config.js file.\nif (OPENTOK_API_KEY &amp;&amp;\n  OPENTOK_SESSION_ID &amp;&amp;\n  OPENTOK_TOKEN &amp;&amp;\n  AZURE_FACE_API_SUBSCRIPTION_KEY &amp;&amp;\n  AZURE_FACE_API_ENDPOINT) {\n\n  opentok_api_key = OPENTOK_API_KEY;\n  opentok_session_id = OPENTOK_SESSION_ID;\n  opentok_token = OPENTOK_TOKEN;\n  azure_face_api_subscription_key = AZURE_FACE_API_SUBSCRIPTION_KEY;\n  azure_face_api_endpoint = AZURE_FACE_API_ENDPOINT;\n\n  initializeSession();\n\n} else {\n\n  alert('Failed to get configuration variables. Make sure you have updated the config.js file.');\n\n}\n\n// Handling all of our errors here by logging them to the console\nfunction handleError(error) {\n  if (error) {\n    console.log(error.message);\n  }\n}\n\nfunction dataURItoBlob(dataURI) {\n  // convert base64/URLEncoded data component to raw binary data held in a string\n  var byteString;\n  if (dataURI.split(\",\")[0].indexOf(\"base64\") &gt;= 0)\n    byteString = atob(dataURI.split(\",\")[1]);\n  else byteString = unescape(dataURI.split(\",\")[1]);\n\n  // separate out the mime component\n  var mimeString = dataURI\n    .split(\",\")[0]\n    .split(\":\")[1]\n    .split(\";\")[0];\n\n  // write the bytes of the string to a typed array\n  var ia = new Uint8Array(byteString.length);\n  for (var i = 0; i &lt; byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  return new Blob([ia], { type: mimeString });\n}\n\nvar streams = [];\nvar emotions = [];\n\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d4820568183-60\">60</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opentok_api_key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opentok_session_id</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opentok_token</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-4\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">azure_face_api_subscription_key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-5\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">azure_face_api_endpoint</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-6\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-7\"><span class=\"crayon-c\">// See the config.js file.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-8\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">OPENTOK_API_KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-9\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">OPENTOK_SESSION_ID</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">OPENTOK_TOKEN</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">AZURE_FACE_API_SUBSCRIPTION_KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">AZURE_FACE_API_ENDPOINT</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-13\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-14\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">opentok_api_key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OPENTOK_API_KEY</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">opentok_session_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OPENTOK_SESSION_ID</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">opentok_token</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OPENTOK_TOKEN</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-17\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">azure_face_api_subscription_key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AZURE_FACE_API_SUBSCRIPTION_KEY</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-18\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">azure_face_api_endpoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AZURE_FACE_API_ENDPOINT</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-19\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-20\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">initializeSession</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-21\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-22\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-23\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-24\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-e\">alert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Failed to get configuration variables. Make sure you have updated the config.js file.'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-25\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-26\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-27\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-28\"><span class=\"crayon-c\">// Handling all of our errors here by logging them to the console</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-29\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-30\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-32\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-33\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-34\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-35\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dataURItoBlob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataURI</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-36\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// convert base64/URLEncoded data component to raw binary data held in a string</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-37\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byteString</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-38\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataURI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\",\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"base64\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">byteString</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">atob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataURI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\",\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-40\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byteString</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">unescape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataURI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\",\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-41\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-42\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// separate out the mime component</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-43\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mimeString</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">dataURI</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\",\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\":\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-46\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\";\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-47\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-48\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// write the bytes of the string to a typed array</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-49\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ia</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Uint8Array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">byteString</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-50\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byteString</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-51\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">ia</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byteString</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">charCodeAt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-52\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-53\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-54\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Blob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ia</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mimeString</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-55\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-56\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-57\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">streams</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-58\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">emotions</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d4820568183-59\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d4820568183-60\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<p>Four things are going on here:</p>\n<ol>\n<li>We load variables based on those we specified in the <code>config.js</code> file</li>\n<li>We create a <code>handleError</code> method that we&#8217;ll use throughout when an error occurs</li>\n<li>We add a <code>dataURItoBlob</code> method that we&#8217;ll use to convert a base64/URLEncoded image to a blob for sending to Azure Face API</li>\n<li>We added two arrays named <code>streams</code> and <code>emotions</code></li>\n</ol>\n<p>The <code>streams</code> array will hold all active participant streams so we can access them to capture images to send to the Azure Face API.</p>\n<p>The <code>emotions</code> array will hold strings that represent any emotions returned by Azure Face API. This will be used to display a legend of emojis to the user dynamically.</p>\n<h3>Initializing the OpenTok Session</h3>\n<p>Add the <code>initializeSession</code> method below to the bottom of the <code>app.js</code> file.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8d5941710477\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nfunction initializeSession() {\n  var session = OT.initSession(opentok_api_key, opentok_session_id);\n\n  // Subscribe to a newly created streams and add\n  // them to our collection of active streams.\n  session.on(\"streamCreated\", function (event) {\n    streams.push(event.stream);\n    session.subscribe(\n      event.stream,\n      \"subscriber\",\n      {\n        insertMode: \"append\"\n      },\n      handleError\n    );\n  });\n\n  // Remove streams from our array when they are destroyed.\n  session.on(\"streamDestroyed\", function (event) {\n    streams = streams.filter(f =&gt; f.id !== event.stream.id);\n  });\n\n  // Create a publisher\n  var publisher = OT.initPublisher(\n    \"publisher\",\n    {\n      insertMode: \"append\"\n    },\n    handleError\n  );\n\n  // Connect to the session\n  session.connect(opentok_token, function (error) {\n    // If the connection is successful, initialize a publisher and publish to the session\n    if (error) {\n      handleError(error);\n    } else {\n      session.publish(publisher, handleError);\n    }\n  });\n}\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d5941710477-42\">42</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">initializeSession</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">session</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OT</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">initSession</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opentok_api_key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opentok_session_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-3\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Subscribe to a newly created streams and add</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// them to our collection of active streams.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"streamCreated\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">streams</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stream</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subscribe</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stream</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"subscriber\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">insertMode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"append\"</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">handleError</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-15\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-17\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-18\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Remove streams from our array when they are destroyed.</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-19\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"streamDestroyed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">streams</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">streams</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">filter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stream</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-21\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-22\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-23\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Create a publisher</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-24\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">publisher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">OT</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">initPublisher</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">\"publisher\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">insertMode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"append\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-i\">handleError</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-30\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-31\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-32\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Connect to the session</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-33\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">connect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opentok_token</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-c\">// If the connection is successful, initialize a publisher and publish to the session</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">handleError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">session</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">publisher</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handleError</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-40\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d5941710477-41\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d5941710477-42\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<p>The <code>initializeSession</code> method initializes our OpenTok client with the session we specified with the Session ID. It then adds event handlers for the <code>streamCreated</code> and <code>streamDestroyed</code> events to manage adding and removing streams from our <code>streams</code> array. Finally, it connects to the session using the Token we set in our <code>config.js</code> file.</p>\n<p>You can now open the <code>index.html</code> in Chrome or Firefox. When you load the page, you may need to allow the browser to access your webcam and microphone. After that, you should see a video stream of yourself (or whatever your webcam is looking at) displaying on the page.</p>\n<p>If that worked, mute your audio then open another tab (keeping the original open) and load the same file. You should now be able to see a second video.</p>\n<blockquote><p>\n  <strong>Troubleshooting tip:</strong> If there&#8217;s no video showing up on the page, open the &#8220;console&#8221; tab in your browser tools (command+option+i on Mac, CTRL+i on Windows) and check for errors. The most likely issue is that your OpenTok API key, session ID, or token is not set up properly. Since you hardcoded your credentials, it&#8217;s also possible that your token has expired.\n</p></blockquote>\n<h2>I Know That Look</h2>\n<p>Now we can see and hear participants, but what is their face telling us that their mouth isn&#8217;t? Let&#8217;s add a button that allows us to analyze each participant.</p>\n<p>In the <code>index.html</code> file, replace the comment that says <code>&lt;!-- Footer will go here --&gt;</code> with the following:</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8d8702116276\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\n&lt;footer&gt;\n    &lt;button id=\"analyze\" type=\"button\" onclick=\"processImages();\"&gt;Analyze&lt;/button&gt;\n\n    &lt;ul&gt;\n        &lt;li name=\"em-angry\"&gt;&lt;i class=\"em em-angry\"&gt;&lt;/i&gt; Angry&lt;/li&gt;\n        &lt;li name=\"em-frowning\"&gt;&lt;i class=\"em em-frowning\"&gt;&lt;/i&gt; Contempt&lt;/li&gt;\n        &lt;li name=\"em-face_vomiting\"&gt;&lt;i class=\"em em-face_vomiting\"&gt;&lt;/i&gt; Disgust&lt;/li&gt;\n        &lt;li name=\"em-fearful\"&gt;&lt;i class=\"em em-fearful\"&gt;&lt;/i&gt; Fear&lt;/li&gt;\n        &lt;li name=\"em-grin\"&gt;&lt;i class=\"em em-grin\"&gt;&lt;/i&gt; Happiness&lt;/li&gt;\n        &lt;li name=\"em-neutral_face\"&gt;&lt;i class=\"em em-neutral_face\"&gt;&lt;/i&gt; Neutral&lt;/li&gt;\n        &lt;li name=\"em-cry\"&gt;&lt;i class=\"em em-cry\"&gt;&lt;/i&gt; Sadness&lt;/li&gt;\n        &lt;li name=\"em-astonished\"&gt;&lt;i class=\"em em-astonished\"&gt;&lt;/i&gt; Surprise&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/footer&gt;\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8d8702116276-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">footer</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-2\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">button </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"analyze\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"button\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">onclick</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"processImages();\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">Analyze</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">button</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-3\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-4\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-5\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-angry\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-angry\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Angry</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-6\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-frowning\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-frowning\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Contempt</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-7\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-face_vomiting\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-face_vomiting\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Disgust</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-8\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-fearful\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-fearful\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Fear</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-grin\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-grin\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Happiness</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-neutral_face\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-neutral_face\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Neutral</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-11\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-cry\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-cry\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Sadness</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-12\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em-astonished\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"em em-astonished\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Surprise</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8d8702116276-14\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">footer</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8d8702116276-15\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<p>This adds a footer at the bottom of the page with an &#8220;Analyze&#8221; button and an unordered list that we&#8217;ll use as a legend between emojis and sentiments.</p>\n<p>Now let&#8217;s add the JavaScript to handle our sentiment analysis. Add the following to the bottom of the <code>app.js</code> file.</p>\n<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->\r\n\r\n\t\t<div id=\"crayon-5e9c0bd05d8da487682110\" class=\"crayon-syntax crayon-theme-nexmo-2018 crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-mouseover\" style=\" margin-top: 24px; margin-bottom: 24px; font-size: 14px !important; line-height: 22px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 14px !important;height: 21px !important; line-height: 21px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"Toggle Line Numbers\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"Toggle Line Wrap\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"Expand Code\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"Copy\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"Open Code In New Window\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 19.6px !important; line-height: 19.6px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">\nfunction assignEmoji(emojiClass, index) {\n  var widgets = document.getElementsByClassName('OT_widget-container');\n  emotions.push(emojiClass);\n\n  var sentimentDiv = document.createElement(\"div\");\n  sentimentDiv.classList.add(\"sentiment\");\n  sentimentDiv.classList.add(\"em\");\n  sentimentDiv.classList.add(emojiClass);\n\n  widgets[index].appendChild(sentimentDiv);\n\n  const legendEl = document.getElementsByName(emojiClass);\n  legendEl[0].classList.add('used');\n}\n\nfunction processEmotion(faces, index) {\n  // for each face identified in the result\n  for (i = 0; i \n      memo[1] &amp;gt; value ? memo : [key, value]\n    );\n\n    let emojiClass = 'em-neutral_face';\n    switch (maxEmotion[0]) {\n      case 'angry':\n        emojiClass = 'em-angry';\n        break;\n      case 'contempt':\n        emojiClass = 'em-frowning';\n        break;\n      case 'disgust':\n        emojiClass = 'em-face_vomiting';\n        break;\n      case 'fear':\n        emojiClass = 'em-fearful';\n        break;\n      case 'happiness':\n        emojiClass = 'em-grin';\n        break;\n      case 'sadness':\n        emojiClass = 'em-cry';\n        break;\n      case 'surprise':\n        emojiClass = 'em-astonished';\n        break;\n      default:\n        break;\n    }\n    assignEmoji(emojiClass, index);\n  }\n}\n\n// Gets a &lt;video&gt; element and draws it to a new\n// canvas object. Then creates a jpeg blob from that\n// canvas and sends to Azure Face API to get emotion\n// data.\nfunction sendToAzure(video, index) {\n  // Get the stream object associated with this\n  // &lt;video&gt; element.\n  var stream = streams[index];\n\n  var canvas = document.createElement(\"canvas\");\n  canvas.height = stream.videoDimensions.height;\n  canvas.width = stream.videoDimensions.width;\n\n  var ctx = canvas.getContext(\"2d\");\n  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n  var dataURL = canvas.toDataURL(\"image/jpeg\", 0.8);\n  var blob = dataURItoBlob(dataURL);\n  var fd = new FormData(document.forms[0]);\n  fd.append(\"canvasImage\", blob);\n\n  // Perform the REST API call.\n  var uriBase = `${azure_face_api_endpoint}/face/v1.0/detect`;\n\n  // Request parameters.\n  var params = 'returnFaceId=true&amp;amp;returnFaceLandmarks=false&amp;amp;returnFaceAttributes=emotion';\n\n  const xhr = new XMLHttpRequest();\n  xhr.open('POST', `${uriBase}?${params}`);\n  xhr.responseType = 'json';\n  xhr.setRequestHeader('Content-Type', 'application/octet-stream');\n  xhr.setRequestHeader(\"Ocp-Apim-Subscription-Key\", azure_face_api_subscription_key);\n\n  xhr.send(blob);\n\n  xhr.onload = () =&amp;gt; {\n\n    if (xhr.status == 200) {\n      processEmotion(xhr.response, index);\n    } else {\n      var errorString = `(${xhr.status}) ${xhr.statusText}`;\n      alert(errorString);\n    }\n  }\n}\n\n// Reset emojis and loop through all &lt;video&gt; elements and call\n// sendToAzure\nfunction processImages() {\n  emotions = [];\n  var sentiments = document.getElementsByClassName('sentiment');\n  var usedListItems = document.getElementsByClassName('used');\n  var videos = document.getElementsByTagName('video');\n\n  // Remove any existing sentiment &amp;amp; emotion objects\n  if (sentiments.length &amp;gt; 0) {\n    for (s = 0; s  0) {\n    for (l = 0; l &amp;lt; usedListItems.length; l++) {\n      usedListItems[l].classList.remove(&amp;#039;used&amp;#039;);\n    }\n  }\n\n  for (v = 0; v &amp;lt; (videos.length - 1); v++) {\n    sendToAzure(videos[v], v);\n  }\n}\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5e9c0bd05d8da487682110-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9c0bd05d8da487682110-118\">118</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">assignEmoji</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">widgets</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'OT_widget-container'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">emotions</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-4\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-5\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sentimentDiv</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createElement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"div\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-6\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">sentimentDiv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">classList</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"sentiment\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-7\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">sentimentDiv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">classList</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"em\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">sentimentDiv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">classList</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-9\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-10\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">widgets</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">appendChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sentimentDiv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-11\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">legendEl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-13\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">legendEl</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">classList</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'used'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-14\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-15\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-16\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">processEmotion</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">faces</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-17\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// for each face identified in the result</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-18\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">memo</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">gt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-21\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-22\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-neutral_face'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-23\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">switch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">maxEmotion</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-24\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'angry'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-25\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-angry'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-26\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-27\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'contempt'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-28\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-frowning'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-29\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-30\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'disgust'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-31\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-face_vomiting'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-32\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-33\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'fear'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-34\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-fearful'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-35\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-36\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'happiness'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-37\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-grin'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-38\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-39\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'sadness'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-40\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-cry'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-41\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-42\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'surprise'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-43\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'em-astonished'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-44\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-45\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">default</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-46\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-47\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-48\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">assignEmoji</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">emojiClass</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-49\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-50\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-51\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-52\"><span class=\"crayon-c\">// Gets a &lt;video&gt; element and draws it to a new</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-53\"><span class=\"crayon-c\">// canvas object. Then creates a jpeg blob from that</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-54\"><span class=\"crayon-c\">// canvas and sends to Azure Face API to get emotion</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-55\"><span class=\"crayon-c\">// data.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-56\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sendToAzure</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">video</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-57\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Get the stream object associated with this</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-58\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// &lt;video&gt; element.</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-59\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stream</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">streams</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-60\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-61\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createElement</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"canvas\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-62\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">canvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stream</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">videoDimensions</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-63\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">canvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stream</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">videoDimensions</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-64\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-65\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ctx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getContext</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2d\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-66\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">ctx</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">drawImage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">video</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-67\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-68\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dataURL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toDataURL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"image/jpeg\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-69\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">blob</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dataURItoBlob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dataURL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-70\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FormData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forms</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-71\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">fd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"canvasImage\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">blob</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-72\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-73\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Perform the REST API call.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-74\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">uriBase</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">azure_face_api_endpoint</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">face</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">v1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">detect</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-75\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-76\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Request parameters.</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-77\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">params</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'returnFaceId=true&amp;amp;returnFaceLandmarks=false&amp;amp;returnFaceAttributes=emotion'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-78\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-79\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xhr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">XMLHttpRequest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-80\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'POST'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">uriBase</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">?</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-81\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">responseType</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'json'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-82\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setRequestHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Content-Type'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'application/octet-stream'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-83\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setRequestHeader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Ocp-Apim-Subscription-Key\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">azure_face_api_subscription_key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-84\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-85\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">blob</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-86\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-87\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=&amp;</span><span class=\"crayon-v\">gt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-88\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-89\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-90\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">processEmotion</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-91\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-92\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">errorString</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">status</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">xhr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">statusText</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-93\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">alert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">errorString</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-94\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-95\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-96\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-97\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-98\"><span class=\"crayon-c\">// Reset emojis and loop through all &lt;video&gt; elements and call</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-99\"><span class=\"crayon-c\">// sendToAzure</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-100\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">processImages</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-101\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">emotions</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-102\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sentiments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'sentiment'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-103\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">usedListItems</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByClassName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'used'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-104\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">videos</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementsByTagName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'video'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-105\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-106\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-c\">// Remove any existing sentiment &amp;amp; emotion objects</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-107\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sentiments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">gt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-108\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">s</span><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-109\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">lt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">usedListItems</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-110\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">usedListItems</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">classList</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-p\">#039;used&amp;#039;);</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-111\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-112\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-113\">&nbsp;</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-114\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">lt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">videos</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-115\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-e\">sendToAzure</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">videos</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-116\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9c0bd05d8da487682110-117\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9c0bd05d8da487682110-118\">&nbsp;</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<p>Let&#039;s review what this code does.</p>\n<p>The <code>assignEmoji</code> method takes in a CSS class associated with the emotion for a specific video stream and the index of that stream in our UI. It does the following:</p>\n<ol>\n<li>Adds the provided class to our <code>emotions</code> array</li>\n<li>Adds a div over the appropriate video panel with the class for the emoji to display</li>\n<li>Adds a <code>used</code> class to the <code>li</code> in our footer for that emoji so that it will display in the legend</li>\n</ol>\n<p>The <code>processEmotion</code> method receives the payload of face data from the Azure Face API and identifies the emotion with the highest ranking. It then calls <code>assignEmoji</code> with the appropriate CSS class for that emotion and the index of the video it is processing.</p>\n<p>The <code>sendToAzure</code> method receives an HTML video element and the index of that video object on our page. It gets the stream associated with that video element and then creates an HTML canvas in the same dimensions as the stream. Next, it draws a capture of the stream to the new canvas and sends an XMLHttpRequest to the Azure Face API with the image it created. The Azure Face API will return a JSON object that we will then send to the <code>processEmotion</code> method.</p>\n<p>Lastly, the <code>processImages</code> method clears any existing emojis from the UI and gets all HTML video tags in the DOM and sends them to the <code>sendToAzure</code> method to be processed. This method is called by our &quot;Analyze&quot; button in the footer.</p>\n<h2>What Are You Really Thinking?</h2>\n<p>Now when we open the <code>index.html</code> page in our browsers we can press the &quot;Analyze&quot; button to see what emotion Azure&#039;s Face API has identified. There are a few limitations at the moment. For instance, if Azure Face API recognizes two faces in the frame it will return data for both, but our code currently only adds an emoji for the first.</p>\n<p>Also, I&#039;m not certain, but it may not work for teenagers. I made my teenage daughter test it dozens of times but it only returned &quot;disgust&quot; and &quot;contempt&quot; as the emotions. Maybe this wasn&#039;t such a good idea. Maybe it&#039;s better to not know what they really think. ðŸ˜‚</p>\n<p><img src=\"https://www.nexmo.com/wp-content/uploads/2020/01/sentiment.png\" alt=\"Four video frames of Michael showing different sentiments returned from Azure&#039;s Face API\" /></p>\n<h2>Further Reading</h2>\n<p>Want to learn more about using sentiment analysis with Nexmo? Check out the following blog posts:</p>\n<ul>\n<li><a href=\"https://www.nexmo.com/blog/2019/10/17/sentiment-api-analysis-comparison-dr\">Sentiment Analysis API Comparison</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2020/01/13/sentiment-analysis-using-ibm-watson-tone-analyzer-in-php-dr\">Sentiment Analysis using IBM Watson Tone Analyzer in PHP</a></li>\n<li><a href=\"https://www.nexmo.com/blog/2019/04/04/adding-sentiment-analysis-to-sms-ibm-watson-dr\">Adding Sentiment Analysis to SMS with IBM Watson</a></li>\n</ul>\n"}