{"_filedata":{"slug":"nexmo-ruby-new-release-host-overriding-dr"},"title":"Nexmo Ruby v6.3.0 Release: Static Type Checking and Host Overriding","description":"","thumbnail":"https://www.nexmo.com/wp-content/uploads/2020/02/E_Ruvy-SDK-Update_1200x600.png","author":301,"published":true,"published_at":"2020-02-26T12:01:14","tags":[360,375,1602],"body":"The Nexmo Ruby SDK recently released [v6.3.0](https://rubygems.org/gems/nexmo), which adds support for overriding the host used for API requests.\n\nThe new release also introduces static type checking into the codebase for the first time. Static type checking is a new area in the Ruby ecosystem, and we are excited to be incorporating it to build a more explicit developer experience for those using the SDK in their applications.\n\n## Host Overriding\n\nBefore v6.3.0, the default hosts for Nexmo APIs, `api.nexmo.com,` and `rest.nexmo.com`, were not able to be directly changed inside the Ruby SDK. The most common reason why a developer would want to specify the host is to make their HTTP requests to the API directly towards one of the location-specific data centers.\n\nYou can read the recent [Node.js SDK Update blog post](https://www.nexmo.com/blog/2020/01/17/nexmo-node-server-sdk-support-host-overriding-dr) for further detail on how this change could benefit your development.\n\nTo demonstrate this new ability in the Ruby SDK, we will examine the [“Make an outbound call with an NCCO”](https://developer.nexmo.com/voice/voice-api/code-snippets/make-an-outbound-call-with-ncco/ruby) Ruby Code Snippet and alter it to use the US East Coast Data Center for the phone call:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">client = Nexmo::Client.new( application_id: NEXMO_APPLICATION_ID, private_key: File.read(NEXMO_APPLICATION_PRIVATE_KEY_PATH), api_host: 'api-us-1.nexmo.com' ) client.calls.create( to: [{ type: 'phone', number: TO_NUMBER }], from: { type: 'phone', number: NEXMO_NUMBER }, ncco: [ { 'action' =&gt; 'talk', 'text' =&gt; 'This is a text to speech call from Nexmo' } ] )</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75894841835871-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75894841835871-23\">23</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-1\"><span class=\"crayon-v\">client</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nexmo</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">Client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">new</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-2\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">application_id</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NEXMO_APPLICATION_ID</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-3\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">private_key</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">File</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">NEXMO_APPLICATION_PRIVATE_KEY_PATH</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-4\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">api_host</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'api-us-1.nexmo.com'</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-5\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-6\">&nbsp;</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-7\"><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">calls</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-8\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-9\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-10\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">number</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TO</span><span class=\"crayon-sy\">_</span>NUMBER</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-11\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-12\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">from</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-13\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'phone'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-14\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-v\">number</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NEXMO</span><span class=\"crayon-sy\">_</span>NUMBER</div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-15\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-16\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-v\">ncco</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-17\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-18\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'action'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'talk'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-19\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-s\">'text'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'This is a text to speech call from Nexmo'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-20\"><span class=\"crayon-h\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-21\"><span class=\"crayon-h\">&nbsp;&nbsp;</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75894841835871-22\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75894841835871-23\">&nbsp;</div></div></td></tr></tbody></table>\n\nThe only change we needed to make was to add the `api_host` parameter in the `client` instance. You do not need to specify the `api_host` parameter during initialization. If you do not, then the default host will be used. This is true for specifying the `rest_host` as well. However, if you want to direct your requests to a specific geo-located data center, you can now do so with the Ruby SDK.\n\n## Static Type Checking\n\nIn the development of our SDKs, we are always looking for ways that we can increase the productivity and joy of developers using the tools we create. Creating applications and services with external APIs presents its own set of particular circumstances when it comes to debugging your work.\n\nThe introduction of static type checking in the Ruby SDK works to increase confidence in the API calls you are making with the SDK, and helps to both decrease and identify bugs as they occur.\n\nIn this SDK release, the [Sorbet Gem](https://sorbet.org/) was installed into the codebase, and we have type checked the `Nexmo::SMS` class.\n\nWe did so by adding a method signature to `Nexmo::SMS#send` and a method signature to the `private` method, `#unicode?`.\n\nThe method signature for `Nexmo::SMS#send` confirms that the method returns an instance of `Nexmo::SMS::Response` and that the method parameters are in received in the form of a Hash:\n\n<textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly=\"\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 14px !important; line-height: 22px !important;\">sig { params(params: T::Hash[Symbol, T.untyped]).returns(Nexmo::SMS::Response) }</textarea>\n\n<table class=\"crayon-table\"><tbody><tr class=\"crayon-row\"><td class=\"crayon-nums \" data-settings=\"show\"><div class=\"crayon-nums-content\" style=\"font-size: 14px !important; line-height: 22px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5e9ddc1a75898854767627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5e9ddc1a75898854767627-2\">2</div></div></td><td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 14px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5e9ddc1a75898854767627-1\"><span class=\"crayon-e\">sig</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">params</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">params</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">Hash</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Symbol</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">untyped</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">returns</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Nexmo</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">SMS</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">Response</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5e9ddc1a75898854767627-2\">&nbsp;</div></div></td></tr></tbody></table>\n\nIn future releases of the Ruby SDK, we will gradually introduce more type checks of classes and the methods within. We also released a [3-part YouTube video series](https://www.youtube.com/playlist?list=PLWYngsniPr_mMVi6W3dhqMoc5qTwTi_vb) on static type checking in Ruby, if you would like to explore the subject further.\n\n## What’s Next?\n\nWe are always iterating on our Ruby SDK to improve the experience of using it. Plans for future releases of the Ruby SDK include incorporating support for the [Messages](https://developer.nexmo.com/messages/overview) and [Dispatch](https://developer.nexmo.com/dispatch/overview) APIs, along with increasing our coverage of type checking.\n\nWe welcome your comments, input, and suggestions. You can come to join the conversation on [GitHub](https://github.com/nexmo/nexmo-ruby) or the [community Slack](https://developer.nexmo.com/community/slack)."}